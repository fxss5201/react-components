import{b as s,R as B}from"./@uiw/react-codemirror-dimZJgSu.js";import{e as se,bF as ot,ap as st,o as Te,aL as de,p as rt,bG as at,bq as ct,$ as ge,a_ as it,bH as lt,n as F,a$ as ut,w as mt,J as ft,X as ne,K as dt,v as pe,s as ve,bI as gt,y as ze,z as ke,D as De}from"./index-CwDalt6B.js";var pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"};function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},he.apply(this,arguments)}const vt=(e,t)=>s.createElement(se,he({},e,{ref:t,icon:pt})),ht=s.forwardRef(vt);var wt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"};function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},we.apply(this,arguments)}const Ct=(e,t)=>s.createElement(se,we({},e,{ref:t,icon:wt})),yt=s.forwardRef(Ct);var xt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"};function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ce.apply(this,arguments)}const bt=(e,t)=>s.createElement(se,Ce({},e,{ref:t,icon:xt})),Le=s.forwardRef(bt);var It={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ye.apply(this,arguments)}const Et=(e,t)=>s.createElement(se,ye({},e,{ref:t,icon:It})),St=s.forwardRef(Et);var Nt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},xe.apply(this,arguments)}const Mt=(e,t)=>s.createElement(se,xe({},e,{ref:t,icon:Nt})),Pt=s.forwardRef(Mt);function Ye(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(n=Ye(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function W(){for(var e,t,n=0,o="",c=arguments.length;n<c;n++)(e=arguments[n])&&(t=Ye(e))&&(o&&(o+=" "),o+=t);return o}const me=s.createContext(null);function Rt(e){return new Promise(t=>{if(!e){t(!1);return}const n=document.createElement("img");n.onerror=()=>t(!1),n.onload=()=>t(!0),n.src=e})}function Xe(){const e=document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;return{width:e,height:t}}const ce={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function Ot(e,t,n,o){const c=s.useRef(null),r=s.useRef([]),[a,l]=s.useState(ce),f=d=>{l(ce),ot(ce,a)||o?.({transform:ce,action:d})},m=(d,C)=>{c.current===null&&(r.current=[],c.current=st(()=>{l(v=>{let g=v;return r.current.forEach(y=>{g={...g,...y}}),c.current=null,o?.({transform:g,action:C}),g})})),r.current.push({...a,...d})};return{transform:a,resetTransform:f,updateTransform:m,dispatchZoomChange:(d,C,v,g,y)=>{const{width:w,height:I,offsetWidth:i,offsetHeight:u,offsetLeft:E,offsetTop:x}=e.current;let b=d,p=a.scale*d;p>n?(p=n,b=n/a.scale):p<t&&(p=y?p:t,b=p/a.scale);const P=v??innerWidth/2,O=g??innerHeight/2,S=b-1,R=S*w*.5,j=S*I*.5,T=S*(P-a.x-E),z=S*(O-a.y-x);let M=a.x-(T-R),$=a.y-(z-j);if(d<1&&p===1){const Z=i*p,D=u*p,{width:L,height:N}=Xe();Z<=L&&D<=N&&(M=0,$=0)}m({x:M,y:$,scale:p},C)}}}function je(e,t,n,o){const c=t+n,r=(n-o)/2;if(n>o){if(t>0)return{[e]:r};if(t<0&&c<o)return{[e]:-r}}else if(t<0||c>o)return{[e]:t<0?r:-r};return{}}function He(e,t,n,o){const{width:c,height:r}=Xe();let a=null;return e<=c&&t<=r?a={x:0,y:0}:(e>c||t>r)&&(a={...je("x",n,e,c),...je("y",o,t,r)}),a}const te=1,$t=1;function Lt(e,t,n,o,c,r,a){const{rotate:l,scale:f,x:m,y:h}=c,[d,C]=s.useState(!1),v=s.useRef({diffX:0,diffY:0,transformX:0,transformY:0}),g=i=>{!t||i.button!==0||(i.preventDefault(),i.stopPropagation(),v.current={diffX:i.pageX-m,diffY:i.pageY-h,transformX:m,transformY:h},C(!0))},y=i=>{n&&d&&r({x:i.pageX-v.current.diffX,y:i.pageY-v.current.diffY},"move")},w=()=>{if(n&&d){C(!1);const{transformX:i,transformY:u}=v.current;if(!(m!==i&&h!==u))return;const x=e.current.offsetWidth*f,b=e.current.offsetHeight*f,{left:p,top:P}=e.current.getBoundingClientRect(),O=l%180!==0,S=He(O?b:x,O?x:b,p,P);S&&r({...S},"dragRebound")}},I=i=>{if(!n||i.deltaY==0)return;const u=Math.abs(i.deltaY/100),E=Math.min(u,$t);let x=te+E*o;i.deltaY>0&&(x=te/x),a(x,"wheel",i.clientX,i.clientY)};return s.useEffect(()=>{if(t){window.addEventListener("mouseup",w,!1),window.addEventListener("mousemove",y,!1);try{window.top!==window.self&&(window.top.addEventListener("mouseup",w,!1),window.top.addEventListener("mousemove",y,!1))}catch{}}return()=>{window.removeEventListener("mouseup",w),window.removeEventListener("mousemove",y);try{window.top?.removeEventListener("mouseup",w),window.top?.removeEventListener("mousemove",y)}catch{}}},[n,d,m,h,l,t]),{isMoving:d,onMouseDown:g,onMouseMove:y,onMouseUp:w,onWheel:I}}function Ze({src:e,isCustomPlaceholder:t,fallback:n}){const[o,c]=s.useState(t?"loading":"normal"),r=s.useRef(!1),a=o==="error";s.useEffect(()=>{let h=!0;return Rt(e).then(d=>{!d&&h&&c("error")}),()=>{h=!1}},[e]),s.useEffect(()=>{t&&!r.current?c("loading"):a&&c("normal")},[e]);const l=()=>{c("normal")};return[h=>{r.current=!1,o==="loading"&&h?.complete&&(h.naturalWidth||h.naturalHeight)&&(r.current=!0,l())},a&&n?{src:n}:{onLoad:l,src:e},o]}function ie(e,t){const n=e.x-t.x,o=e.y-t.y;return Math.hypot(n,o)}function jt(e,t,n,o){const c=ie(e,n),r=ie(t,o);if(c===0&&r===0)return[e.x,e.y];const a=c/(c+r),l=e.x+a*(t.x-e.x),f=e.y+a*(t.y-e.y);return[l,f]}function At(e,t,n,o,c,r,a){const{rotate:l,scale:f,x:m,y:h}=c,[d,C]=s.useState(!1),v=s.useRef({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),g=i=>{v.current={...v.current,...i}},y=i=>{if(!t)return;i.stopPropagation(),C(!0);const{touches:u=[]}=i;u.length>1?g({point1:{x:u[0].clientX,y:u[0].clientY},point2:{x:u[1].clientX,y:u[1].clientY},eventType:"touchZoom"}):g({point1:{x:u[0].clientX-m,y:u[0].clientY-h},eventType:"move"})},w=i=>{const{touches:u=[]}=i,{point1:E,point2:x,eventType:b}=v.current;if(u.length>1&&b==="touchZoom"){const p={x:u[0].clientX,y:u[0].clientY},P={x:u[1].clientX,y:u[1].clientY},[O,S]=jt(E,x,p,P),R=ie(p,P)/ie(E,x);a(R,"touchZoom",O,S,!0),g({point1:p,point2:P,eventType:"touchZoom"})}else b==="move"&&(r({x:u[0].clientX-E.x,y:u[0].clientY-E.y},"move"),g({eventType:"move"}))},I=()=>{if(!n)return;if(d&&C(!1),g({eventType:"none"}),o>f)return r({x:0,y:0,scale:o},"touchZoom");const i=e.current.offsetWidth*f,u=e.current.offsetHeight*f,{left:E,top:x}=e.current.getBoundingClientRect(),b=l%180!==0,p=He(b?u:i,b?i:u,E,x);p&&r({...p},"dragRebound")};return s.useEffect(()=>{const i=u=>{u.preventDefault()};return n&&t&&window.addEventListener("touchmove",i,{passive:!1}),()=>{window.removeEventListener("touchmove",i)}},[n,t]),{isTouching:d,onTouchStart:y,onTouchMove:w,onTouchEnd:I}}function Tt(e){const{prefixCls:t,icon:n,onClick:o}=e;return s.createElement("button",{className:`${t}-close`,onClick:o},n)}function zt(e){const{prefixCls:t,showProgress:n,current:o,count:c,showSwitch:r,classNames:a,styles:l,icons:f,image:m,transform:h,countRender:d,actionsRender:C,scale:v,minScale:g,maxScale:y,onActive:w,onFlipY:I,onFlipX:i,onRotateLeft:u,onRotateRight:E,onZoomOut:x,onZoomIn:b,onClose:p,onReset:P}=e,{left:O,right:S,prev:R,next:j,flipY:T,flipX:z,rotateLeft:M,rotateRight:$,zoomOut:Z,zoomIn:D}=f,L=n&&s.createElement("div",{className:`${t}-progress`},d?d(o+1,c):s.createElement("bdi",null,`${o+1} / ${c}`)),N=`${t}-actions-action`,A=({type:q,disabled:ee,onClick:fe,icon:re})=>s.createElement("div",{key:q,className:W(N,`${N}-${q}`,{[`${N}-disabled`]:!!ee}),onClick:fe},re),Y=r?A({icon:R??O,onClick:()=>w(-1),type:"prev",disabled:o===0}):void 0,X=r?A({icon:j??S,onClick:()=>w(1),type:"next",disabled:o===c-1}):void 0,G=A({icon:T,onClick:I,type:"flipY"}),U=A({icon:z,onClick:i,type:"flipX"}),K=A({icon:M,onClick:u,type:"rotateLeft"}),k=A({icon:$,onClick:E,type:"rotateRight"}),H=A({icon:Z,onClick:x,type:"zoomOut",disabled:v<=g}),J=A({icon:D,onClick:b,type:"zoomIn",disabled:v===y}),Q=s.createElement("div",{className:W(`${t}-actions`,a.actions),style:l.actions},G,U,K,k,H,J);return s.createElement("div",{className:W(`${t}-footer`,a.footer),style:l.footer},L,C?C(Q,{icons:{prevIcon:Y,nextIcon:X,flipYIcon:G,flipXIcon:U,rotateLeftIcon:K,rotateRightIcon:k,zoomOutIcon:H,zoomInIcon:J},actions:{onActive:w,onFlipY:I,onFlipX:i,onRotateLeft:u,onRotateRight:E,onZoomOut:x,onZoomIn:b,onReset:P,onClose:p},transform:h,current:o,total:c,image:m}):Q)}function kt(e){const{prefixCls:t,onActive:n,current:o,count:c,icons:{left:r,right:a,prev:l,next:f}}=e,m=`${t}-switch`;return s.createElement(s.Fragment,null,s.createElement("div",{className:W(m,`${m}-prev`,{[`${m}-disabled`]:o===0}),onClick:()=>n(-1)},l??r),s.createElement("div",{className:W(m,`${m}-next`,{[`${m}-disabled`]:o===c-1}),onClick:()=>n(1)},f??a))}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},le.apply(this,arguments)}const Dt=({fallback:e,src:t,imgRef:n,...o})=>{const[c,r]=Ze({src:t,fallback:e});return B.createElement("img",le({ref:a=>{n.current=a,c(a)}},o,r))},_e=e=>{const{prefixCls:t,rootClassName:n,src:o,alt:c,imageInfo:r,fallback:a,movable:l=!0,onClose:f,open:m,afterOpenChange:h,icons:d={},closeIcon:C,getContainer:v,current:g=0,count:y=1,countRender:w,scaleStep:I=.5,minScale:i=1,maxScale:u=50,motionName:E="fade",imageRender:x,imgCommonProps:b,actionsRender:p,onTransform:P,onChange:O,classNames:S={},styles:R={},mousePosition:j,zIndex:T}=e,z=s.useRef(),M=s.useContext(me),$=M&&y>1,Z=M&&y>=1,[D,L]=s.useState(!0),{transform:N,resetTransform:A,updateTransform:Y,dispatchZoomChange:X}=Ot(z,i,u,P),{isMoving:G,onMouseDown:U,onWheel:K}=Lt(z,l,m,I,N,Y,X),{isTouching:k,onTouchStart:H,onTouchMove:J,onTouchEnd:Q}=At(z,l,m,i,N,Y,X),{rotate:q,scale:ee}=N;s.useEffect(()=>{D||L(!0)},[D]),s.useEffect(()=>{m||A("close")},[m]);const fe=_=>{m&&(ee!==1?Y({x:0,y:0,scale:1},"doubleClick"):X(te+I,"doubleClick",_.clientX,_.clientY))},re=B.createElement(Dt,le({},b,{width:e.width,height:e.height,imgRef:z,className:`${t}-img`,alt:c,style:{transform:`translate3d(${N.x}px, ${N.y}px, 0) scale3d(${N.flipX?"-":""}${ee}, ${N.flipY?"-":""}${ee}, 1) rotate(${q}deg)`,transitionDuration:(!D||k)&&"0s"},fallback:a,src:o,onWheel:K,onMouseDown:U,onDoubleClick:fe,onTouchStart:H,onTouchMove:J,onTouchEnd:Q,onTouchCancel:Q})),Ne={url:o,alt:c,...r},Ve=()=>{X(te+I,"zoomIn")},Ge=()=>{X(te/(te+I),"zoomOut")},Ue=()=>{Y({rotate:q+90},"rotateRight")},Qe=()=>{Y({rotate:q-90},"rotateLeft")},Je=()=>{Y({flipX:!N.flipX},"flipX")},Ke=()=>{Y({flipY:!N.flipY},"flipY")},qe=()=>{A("reset")},ae=_=>{const V=g+_;V>=0&&V<=y-1&&(L(!1),A(_<0?"prev":"next"),O?.(V,g))},Me=Te(_=>{if(m){const{keyCode:V}=_;V===de.ESC&&f?.(),$&&(V===de.LEFT?ae(-1):V===de.RIGHT&&ae(1))}});s.useEffect(()=>{if(m)return window.addEventListener("keydown",Me),()=>{window.removeEventListener("keydown",Me)}},[m]);const[et,Pe]=s.useState(!1);B.useEffect(()=>{m&&Pe(!0)},[m]);const tt=_=>{_||Pe(!1),h?.(_)},[Re,nt]=s.useState(!1);rt(()=>{m&&nt(!0)},[m]);const Oe={...R.body};return j&&(Oe.transformOrigin=`${j.x}px ${j.y}px`),B.createElement(at,{open:Re,getContainer:v,autoLock:et},B.createElement(ct,{motionName:E,visible:Re&&m,motionAppear:!0,motionEnter:!0,motionLeave:!0,onVisibleChanged:tt},({className:_,style:V})=>{const $e={...R.root,...V};return T&&($e.zIndex=T),B.createElement("div",{className:W(t,n,S.root,_,{[`${t}-moving`]:G}),style:$e},B.createElement("div",{className:W(`${t}-mask`,S.mask),style:R.mask,onClick:f}),B.createElement("div",{className:W(`${t}-body`,S.body),style:Oe},x?x(re,{transform:N,image:Ne,...M?{current:g}:{}}):re),C!==!1&&C!==null&&B.createElement(Tt,{prefixCls:t,icon:C===!0?d.close:C||d.close,onClick:f}),$&&B.createElement(kt,{prefixCls:t,current:g,count:y,icons:d,onActive:ae}),B.createElement(zt,{prefixCls:t,showProgress:Z,current:g,count:y,showSwitch:$,classNames:S,styles:R,image:Ne,transform:N,icons:d,countRender:w,actionsRender:p,scale:ee,minScale:i,maxScale:u,onActive:ae,onFlipY:Ke,onFlipX:Je,onRotateLeft:Qe,onRotateRight:Ue,onZoomOut:Ge,onZoomIn:Ve,onClose:f,onReset:qe}))}))},be=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"];function Yt(e){const[t,n]=s.useState({}),o=s.useCallback((r,a)=>(n(l=>({...l,[r]:a})),()=>{n(l=>{const f={...l};return delete f[r],f})}),[]);return[s.useMemo(()=>e?e.map(r=>{if(typeof r=="string")return{data:{src:r}};const a={};return Object.keys(r).forEach(l=>{["src",...be].includes(l)&&(a[l]=r[l])}),{data:a}}):Object.keys(t).reduce((r,a)=>{const{canPreview:l,data:f}=t[a];return l&&r.push({data:f,id:a}),r},[]),[e,t]),o,!!e]}function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ie.apply(this,arguments)}const Xt=({previewPrefixCls:e="rc-image-preview",classNames:t,styles:n,children:o,icons:c={},items:r,preview:a,fallback:l})=>{const{open:f,onOpenChange:m,current:h,onChange:d,...C}=a&&typeof a=="object"?a:{},[v,g,y]=Yt(r),[w,I]=ge(0,h),[i,u]=s.useState(!1),{src:E,...x}=v[w]?.data||{},[b,p]=ge(!!f,f),P=Te(M=>{p(M),M!==b&&m?.(M,{current:w})}),[O,S]=s.useState(null),R=s.useCallback((M,$,Z,D)=>{const L=y?v.findIndex(N=>N.data.src===$):v.findIndex(N=>N.id===M);I(L<0?0:L),P(!0),S({x:Z,y:D}),u(!0)},[v,y]);s.useEffect(()=>{b?i||I(0):u(!1)},[b]);const j=(M,$)=>{I(M),d?.(M,$)},T=()=>{P(!1),S(null)},z=s.useMemo(()=>({register:g,onPreview:R}),[g,R]);return s.createElement(me.Provider,{value:z},o,s.createElement(_e,Ie({"aria-hidden":!b,open:b,prefixCls:e,onClose:T,mousePosition:O,imgCommonProps:x,src:E,fallback:l,icons:c,current:w,count:v.length,onChange:j},C,{classNames:t?.popup,styles:n?.popup})))};let Ae=0;function Ht(e,t){const[n]=s.useState(()=>(Ae+=1,String(Ae))),o=s.useContext(me),c={data:t,canPreview:e};return s.useEffect(()=>{if(o)return o.register(n,c)},[]),s.useEffect(()=>{o&&o.register(n,c)},[e,t]),n}function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},oe.apply(this,arguments)}const Se=e=>{const{prefixCls:t="rc-image",previewPrefixCls:n=`${t}-preview`,rootClassName:o,className:c,style:r,classNames:a={},styles:l={},width:f,height:m,src:h,alt:d,placeholder:C,fallback:v,preview:g=!0,onClick:y,onError:w,...I}=e,i=s.useContext(me),u=!!g,{src:E,open:x,onOpenChange:b,cover:p,rootClassName:P,...O}=g&&typeof g=="object"?g:{},S=typeof p=="object"&&p.placement&&p.placement||"center",R=typeof p=="object"&&p.coverNode?p.coverNode:p,[j,T]=ge(!!x,x),[z,M]=s.useState(null),$=k=>{T(k),b?.(k)},Z=()=>{$(!1)},D=C&&C!==!0,L=E??h,[N,A,Y]=Ze({src:h,isCustomPlaceholder:D,fallback:v}),X=s.useMemo(()=>{const k={};return be.forEach(H=>{e[H]!==void 0&&(k[H]=e[H])}),k},be.map(k=>e[k])),G=s.useMemo(()=>({...X,src:L}),[L,X]),U=Ht(u,G),K=k=>{const H=k.target.getBoundingClientRect(),J=H.x+H.width/2,Q=H.y+H.height/2;i?i.onPreview(U,L,J,Q):(M({x:J,y:Q}),$(!0)),y?.(k)};return s.createElement(s.Fragment,null,s.createElement("div",oe({},I,{className:W(t,o,a.root,{[`${t}-error`]:Y==="error"}),onClick:u?K:y,style:{width:f,height:m,...l.root}}),s.createElement("img",oe({},X,{className:W(`${t}-img`,{[`${t}-img-placeholder`]:C===!0},a.image,c),style:{height:m,...l.image,...r},ref:N},A,{width:f,height:m,onError:w})),Y==="loading"&&s.createElement("div",{"aria-hidden":"true",className:`${t}-placeholder`},C),p!==!1&&u&&s.createElement("div",{className:W(`${t}-cover`,a.cover,`${t}-cover-${S}`),style:{display:r?.display==="none"?"none":void 0,...l.cover}},R)),!i&&u&&s.createElement(_e,oe({"aria-hidden":!j,open:j,prefixCls:n,onClose:Z,mousePosition:z,src:L,alt:d,imageInfo:{width:f,height:m},fallback:v,imgCommonProps:X},O,{classNames:a?.popup,styles:l?.popup,rootClassName:W(P,o)})))};Se.PreviewGroup=Xt;const Be=(e,t,n,o,c,r,a)=>{const[l]=it("ImagePreview",e?.zIndex),[f,m]=lt(e?.mask,t?.mask,`${n}-preview`);return B.useMemo(()=>{if(!e)return e;const{cover:h,getContainer:d,closeIcon:C,rootClassName:v}=e,{closeIcon:g}=t??{};return{motionName:ut(`${n}-preview`,"fade"),...e,...a?{cover:h??a}:{},icons:r,getContainer:d??c,zIndex:l,closeIcon:C??g,rootClassName:F(o,v),mask:f,blurClassName:m.mask}},[e,t,n,o,c,a,r,l,f,m])};function Zt(e){return s.isValidElement(e)?[e,void 0]:typeof e=="boolean"||e&&typeof e=="object"?[void 0,e]:[void 0,void 0]}function ue(e){const t=s.useMemo(()=>typeof e=="boolean"?e?{}:null:e&&typeof e=="object"?e:{},[e]);return s.useMemo(()=>{if(!t)return[t,"",""];const{open:o,onOpenChange:c,cover:r,actionsRender:a,visible:l,onVisibleChange:f,rootClassName:m,maskClassName:h,mask:d,forceRender:C,destroyOnClose:v,toolbarRender:g,...y}=t;let w;c?w=c:f&&(w=(u,E)=>{const{current:x}=E||{};x!==void 0?f(u,!u,x):f(u,!u)});const[I,i]=Zt(d);return[{...y,open:o??l,onOpenChange:w,cover:r??I,mask:i,actionsRender:a??g},m,h]},[t])}const We=e=>({position:e||"absolute",inset:0}),_t=e=>{const{componentCls:t,motionDurationSlow:n,colorTextLightSolid:o}=e;return{[t]:{[`${t}-cover`]:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:o,background:new ne("#000").setA(.3).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${n}`},"&:hover":{[`${t}-cover`]:{opacity:1}},[`${t}-cover-top`]:{inset:"0 0 auto 0",justifyContent:"center"},[`${t}-cover-bottom`]:{inset:"auto 0 0 0",justifyContent:"center"}}}},Bt=e=>{const{motionEaseOut:t,previewCls:n,motionDurationSlow:o,componentCls:c,colorBgMask:r,marginXL:a,marginSM:l,margin:f,colorTextLightSolid:m,paddingSM:h,paddingLG:d,previewOperationHoverColor:C,previewOperationColorDisabled:v,previewOperationSize:g,zIndexPopup:y}=e,w=new ne(r).setA(.1),I=w.clone().setA(.2),i={position:"absolute",color:m,backgroundColor:w.toRgbString(),borderRadius:"50%",padding:h,outline:0,border:0,cursor:"pointer",transition:`all ${o}`,display:"flex",fontSize:g,"&:hover":{backgroundColor:I.toRgbString()},"&:active":{backgroundColor:w.toRgbString()}};return{[`${c}-preview`]:{textAlign:"center",inset:0,position:"fixed",userSelect:"none",zIndex:y,[`${n}-mask`]:{inset:0,position:"absolute",background:r,[`&${c}-preview-mask-blur`]:{backdropFilter:"blur(4px)"},[`&${c}-preview-mask-hidden`]:{display:"none"}},[`${n}-body`]:{...We(),"pointer-events":"none",display:"flex",alignItems:"center",justifyContent:"center","> *":{pointerEvents:"auto"}},[`${n}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${o} ${t} 0s`},[`&-moving ${n}-img`]:{cursor:"grabbing"},[`${n}-close`]:{...i,top:l,insetInlineEnd:l},[`${n}-switch`]:{...i,top:"50%",transform:"translateY(-50%)","&-disabled":{"&, &:hover, &:active":{color:v,background:"transparent",cursor:"not-allowed"}},"&-prev":{insetInlineStart:l},"&-next":{insetInlineEnd:l}},[`${n}-footer`]:{position:"absolute",bottom:a,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:e.previewOperationColor,transform:"translateX(-50%)",gap:f},[`${n}-actions`]:{display:"flex",gap:h,padding:`0 ${dt(d)}`,backgroundColor:w.toRgbString(),borderRadius:100,fontSize:g,"&-action":{padding:h,cursor:"pointer",transition:`all ${o}`,display:"flex",[`&:not(${n}-actions-action-disabled):hover`]:{color:C},"&-disabled":{color:v,cursor:"not-allowed"}}}}}},Wt=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",display:"inline-block",[`${t}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${t}-img-placeholder`]:{backgroundColor:e.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${t}-placeholder`]:{...We()}}}},Ft=e=>{const{previewCls:t,motionDurationSlow:n}=e;return{[t]:{"&-fade":{transition:`opacity ${n}`,"&-enter, &-appear":{opacity:0,[`${t}-body`]:{transform:"scale(0)"},"&-active":{opacity:1,[`${t}-body`]:{transform:"scale(1)",transition:`transform ${n}`}}},"&-leave":{opacity:1,"&-active":{opacity:0,[`${t}-body`]:{transform:"scale(0)",transition:`transform ${n}`}}}}}}},Vt=e=>({zIndexPopup:e.zIndexPopupBase+80,previewOperationColor:new ne(e.colorTextLightSolid).setA(.65).toRgbString(),previewOperationHoverColor:new ne(e.colorTextLightSolid).setA(.85).toRgbString(),previewOperationColorDisabled:new ne(e.colorTextLightSolid).setA(.25).toRgbString(),previewOperationSize:e.fontSizeIcon*1.5}),Fe=mt("Image",e=>{const t=`${e.componentCls}-preview`,n=ft(e,{previewCls:t,imagePreviewSwitchSize:e.controlHeightLG});return[Wt(n),_t(n),Bt(n),Ft(n)]},Vt),Ee={rotateLeft:s.createElement(ht,null),rotateRight:s.createElement(yt,null),zoomIn:s.createElement(St,null),zoomOut:s.createElement(Pt,null),close:s.createElement(gt,null),left:s.createElement(ve,null),right:s.createElement(pe,null),flipX:s.createElement(Le,null),flipY:s.createElement(Le,{rotate:90})},Gt=({previewPrefixCls:e,preview:t,classNames:n,styles:o,...c})=>{const{getPrefixCls:r,getPopupContainer:a,direction:l,preview:f,classNames:m,styles:h}=ze("image"),d=r("image",e),C=`${d}-preview`,v=ke(d),[g,y]=Fe(d,v),w=F(g,y,v),[I,i,u]=ue(t),[E,x,b]=ue(f),p=s.useMemo(()=>({...Ee,left:l==="rtl"?s.createElement(pe,null):s.createElement(ve,null),right:l==="rtl"?s.createElement(ve,null):s.createElement(pe,null)}),[l]),P=Be(I,E,d,w,a,Ee),{mask:O,blurClassName:S}=P??{},R={...c,classNames:n,styles:o},[j,T]=De([m,n,{cover:F(b,u),popup:{root:F(x,i),mask:F({[`${d}-preview-mask-hidden`]:!O},S)}}],[h,o],{props:R},{popup:{_default:"root"}});return s.createElement(Se.PreviewGroup,{preview:P,previewPrefixCls:C,icons:p,...c,classNames:j,styles:T})},Ut=e=>{const{prefixCls:t,preview:n,className:o,rootClassName:c,style:r,styles:a,classNames:l,wrapperStyle:f,fallback:m,...h}=e,{getPrefixCls:d,getPopupContainer:C,className:v,style:g,preview:y,styles:w,classNames:I,fallback:i}=ze("image"),u=d("image",t),E=ke(u),[x,b]=Fe(u,E),p=F(c,x,b,E),P=F(o,x,v),[O,S,R]=ue(n),[j,T,z]=ue(y),M=Be(O,j,u,p,C,Ee,!0),$={...e,preview:M},Z=s.useMemo(()=>({cover:F(z,R),popup:{root:F(T,S)}}),[S,R,T,z]),{mask:D,blurClassName:L}=M??{},N=s.useMemo(()=>({mask:F({[`${u}-preview-mask-hidden`]:!D},L)}),[D,u,L]),A=s.useMemo(()=>[I,l,Z,{popup:N}],[I,l,Z,N]),[Y,X]=De(A,[w,{root:f},a],{props:$},{popup:{_default:"root"}}),G={...g,...r},U=m??i;return s.createElement(Se,{prefixCls:u,preview:M||!1,rootClassName:p,className:P,style:G,fallback:U,...h,classNames:Y,styles:X})};Ut.PreviewGroup=Gt;export{Ut as I};
