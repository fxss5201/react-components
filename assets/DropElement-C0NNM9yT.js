import{b as M,j as H}from"./@uiw/react-codemirror-dimZJgSu.js";import{c as O,b as Q,m as W,l as X}from"./index-CwDalt6B.js";import{u as z}from"./index-BSg5Lc9Y.js";function le(i){const e=O.c(31),{className:C,targetType:I,isIgnoreFolder:U,isUpload:V,onSelect:y,children:A}=i,L=C===void 0?"":C,B=I===void 0?"tree":I,k=U===void 0?!1:U,N=V===void 0?!1:V,{t:P}=Q(),{token:a}=W.useToken();let d;if(e[0]!==k||e[1]!==y||e[2]!==B){let j=function(t){return new Promise((o,s)=>{t.file(o,s)})},$=function(t){return new Promise((o,s)=>{const r=[],c=()=>{t.readEntries(l=>{l.length===0?o(r):(r.push(...l),c())},l=>{s(l)})};c()})},J=function(t){const o=t.dataTransfer?.files;if(o){const r=Array.from(o).filter(ee).map(Z);y(r)}};d=async function(o){try{await K(o)}catch(s){console.log(s),J(o)}};async function K(t){const o=t.dataTransfer?.items;if(o){const s=Array.from(o),r=[];for(let l=0;l<s.length;l++){const f=s[l];if(f.kind!=="file")continue;const n=f.webkitGetAsEntry();n&&r.push(n)}if(!r.length)return;const c=[];for(let l=0;l<r.length;l++){const f=r[l];if(B==="tree")await G(f,c);else{const n=await q(f);c.push(...n)}}y(c)}}async function G(t,o){const s=t.fullPath.split("/").slice(0,-1).join("/")||"/";if(t.isFile){const r=await j(t);o.push({file:r,filePath:t.fullPath,folderPath:s,name:r.name,size:r.size,type:"file"})}else if(t.isDirectory){const r=t.createReader(),c=await $(r),l=[];o.push({filePath:t.fullPath,folderPath:s,name:t.name,type:"folder",children:l});const f=c.map(n=>G(n,l));await Promise.all(f)}}async function q(t){const o=[],s=t.fullPath.split("/").slice(0,-1).join("/")||"/";if(t.isFile){const r=await j(t);o.push({file:r,filePath:t.fullPath,folderPath:s,name:r.name,size:r.size,type:"file"})}else if(t.isDirectory){k||o.push({type:"folder",filePath:t.fullPath,folderPath:s,name:t.name});const r=t.createReader(),l=(await $(r)).map(n=>q(n));(await Promise.all(l)).forEach(n=>{o.push(...n)})}return o}e[0]=k,e[1]=y,e[2]=B,e[3]=d}else d=e[3];const m=M.useRef(null);let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=["dragover","dragenter","dragleave","drop"],e[4]=g):g=e[4];let b;e[5]===Symbol.for("react.memo_cache_sentinel")?(b={target:m},e[5]=b):b=e[5],z(g,Y,b);let T;e[6]===Symbol.for("react.memo_cache_sentinel")?(T=["dragover","dragenter"],e[6]=T):T=e[6];let x;e[7]!==a.colorPrimary?(x=()=>{m.current.style.borderColor=a.colorPrimary},e[7]=a.colorPrimary,e[8]=x):x=e[8];let v;e[9]===Symbol.for("react.memo_cache_sentinel")?(v={target:m},e[9]=v):v=e[9],z(T,x,v);let w;e[10]===Symbol.for("react.memo_cache_sentinel")?(w=["dragleave","drop"],e[10]=w):w=e[10];let D;e[11]!==a.colorBorder?(D=()=>{m.current.style.borderColor=a.colorBorder},e[11]=a.colorBorder,e[12]=D):D=e[12];let E;e[13]===Symbol.for("react.memo_cache_sentinel")?(E={target:m},e[13]=E):E=e[13],z(w,D,E);let F;e[14]===Symbol.for("react.memo_cache_sentinel")?(F=["drop"],e[14]=F):F=e[14];let _;e[15]!==d?(_=j=>{d(j)},e[15]=d,e[16]=_):_=e[16];let R;e[17]===Symbol.for("react.memo_cache_sentinel")?(R={target:m},e[17]=R):R=e[17],z(F,_,R);let u;e[18]!==L?(u=X("border-2 border-dashed border-gray-300 rounded-md p-4 text-gray-400 h-50 flex items-center justify-center",L),e[18]=L,e[19]=u):u=e[19];let p;e[20]!==a.colorBorder||e[21]!==a.colorTextTertiary?(p={borderColor:a.colorBorder,color:a.colorTextTertiary},e[20]=a.colorBorder,e[21]=a.colorTextTertiary,e[22]=p):p=e[22];let h;e[23]!==A||e[24]!==N||e[25]!==P?(h=A||H.jsx("div",{className:"text-2xl",children:N?P("components.DropElement.uploadArea",{defaultValue:"请拖放文件/文件夹到这里进行上传"}):P("components.DropElement.dropArea",{defaultValue:"请拖放文件/文件夹到这里进行选择"})}),e[23]=A,e[24]=N,e[25]=P,e[26]=h):h=e[26];let S;return e[27]!==u||e[28]!==p||e[29]!==h?(S=H.jsx("div",{ref:m,className:u,style:p,children:h}),e[27]=u,e[28]=p,e[29]=h,e[30]=S):S=e[30],S}function Y(i){i.preventDefault(),i.stopPropagation()}function Z(i){return{file:i,filePath:`/${i.name}`,folderPath:"/",name:i.name,size:i.size,type:"file"}}function ee(i){return i.name.includes(".")||i.type!==""||i.size>0}export{le as D};
