import{b as h,j as o}from"./@uiw/react-codemirror-dimZJgSu.js";import{c as vn,bD as En,k as xn,b as wn,Q as Cn,l as ut,I as Dn,ae as On,T as xt,B as wt}from"./index-CwDalt6B.js";import{C as kn}from"./CodeEditor-DCLYA5gR.js";import{J as Sn}from"./JsonRender-CBqOC-Sc.js";import{u as Nn,R as Tn,a as An,b as Rn}from"./use-undo.m-DQTOi8z5.js";import{S as Pn}from"./index-C7j3i05K.js";const ze=(t,e,n,r,a)=>{if(!r)throw new Error(a??`Invalid property path: ${e}
Couldn't access "${n}" in ${JSON.stringify(t)}`)},Bt=t=>typeof t=="object"&&t!==null&&!Array.isArray(t),dt=t=>Array.isArray(t),Gt=(t,e)=>t.filter(((n,r)=>r!==e)),Vn=(t,e,n,r={})=>{const{remove:a=!1,createNew:i=!0,noError:s=!1}=r,p=t,d=typeof(l=e)=="string"?l:typeof l=="number"?String(l):l.reduce(((m,y)=>typeof y=="number"?`${m}[${y}]`:m===""?y:`${m}.${y}`),"");var l;const c=Object.assign(Object.assign({},r),{remove:a,createNew:i,noError:s,fullData:p,fullPath:d}),u=Array.isArray(e)?e:(m=>Array.isArray(m)?m:m.split(/(\.|\[\d+\])/).filter((y=>y!=="."&&y!=="")).map((y=>{const g=/\[(\d+)\]/.exec(y);return g?Number(g[1]):y})).flat())(e).filter((m=>m!==""));return dt(t)&&a&&u.length===1?Gt(t,u[0]):ot(t,u,n,c)},ot=(t,e,n,r)=>{const a=Bt(t)?Object.assign({},t):null,i=dt(t)?[...t]:null;if(e.length===0)return t;if(!a&&!i)throw new Error("Can't assign property -- invalid input object");const{createNew:s,remove:p,noError:d,fullData:l,fullPath:c}=r,u=e[0];if(i&&typeof u=="string")return i.map((b=>ot(b,e,n,r)));if(e.length===1){if(a&&typeof u=="string"){const b=In(a,u,n,r);return b??a}return i&&typeof u=="number"?(Kn(i,u,n,r),i):(ze(l,c,u,d),t)}const m=a||i||[];if(p&&e.length===2&&typeof e[1]=="number"){const b=m[u],T=e[1];return dt(b)?m[u]=Gt(b,T):ze(l,c,u,d,"Trying to remove an indexed item from an object that is not an array"),m}const y=e.slice(1);if(u in t){if(g=m[u],!dt(g)&&!Bt(g)){if(!s)return ze(l,c,u,d),m;m[u]={}}return m[u]=ot(m[u],y,n,r),m}var g;if(s){const b=typeof y[0]=="number"?[]:{};if(a)return m[u]=b,m[u]=ot(m[u],y,n,r),m;if(i&&Array.isArray(m)){m.push(b);const T=m.length-1;return m[T]=ot(m[T],y,n,r),m}}return ze(l,c,u,d),m},In=(t,e,n,r)=>{const{remove:a,createNew:i,noError:s,insertAfter:p,insertBefore:d,fullData:l,fullPath:c}=r;if(d!==void 0||p!==void 0){const m=Object.entries(t);let y=1/0;return y=typeof d=="number"?d:typeof p=="number"?p:m.findIndex((([g,b])=>g===(d??p))),p&&y++,m.splice(y,0,[e,n]),Object.fromEntries(m)}const u=e in t;a?u?delete t[e]:ze(l,c,e,s):i||u?t[e]=n:ze(l,c,e,s)},Kn=(t,e,n,r)=>{const{noError:a,fullData:i,fullPath:s,createNew:p,insert:d}=r;d&&t.splice(e,0,n),e in t?t[e]=n:p?t.push(n):ze(i,s,e,a)},Qe=(t,e,n)=>{const r=Array.isArray(e)?e:Ln(e);if(r.length===0)return t;const a=r[0];if(Array.isArray(t)&&typeof a!="number")return t.map((s=>Qe(s,r)));if(typeof t!="object"||t===null||!(a in t))return _n(t,a);const i=t[a];return r.length===1?i:Qe(i,r.slice(1))},Ln=t=>t.split(/(\.|\[\d+\])/).filter((e=>e!=="."&&e!=="")).map((e=>{const n=/\[(\d+)\]/.exec(e);return n?Number(n[1]):e})).flat(),_n=(t,e,n)=>{throw new Error(`Unable to extract object property
Looking for property: ${e}
In object: ${JSON.stringify(t)}`)};function Zt(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var a=0;for(r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]])}return n}function Ze(t,e,n,r){return new(n||(n=Promise))((function(a,i){function s(l){try{d(r.next(l))}catch(c){i(c)}}function p(l){try{d(r.throw(l))}catch(c){i(c)}}function d(l){var c;l.done?a(l.value):(c=l.value,c instanceof n?c:new n((function(u){u(c)}))).then(s,p)}d((r=r.apply(t,[])).next())}))}const Qt=({className:t,name:e,value:n,setValue:r,handleKeyPress:a,styles:i,textAreaRef:s})=>{if(typeof n!="string")return null;const p=n.slice(-1)===`
`?n+".":n;return o.jsxs("div",{style:{display:"grid"},children:[o.jsx("textarea",{id:`${e}_textarea`,ref:s,style:Object.assign({height:"auto",gridArea:"1 / 1 / 2 / 2",overflowY:"auto",whiteSpace:"pre-wrap"},i),rows:1,className:t,name:`${e}_textarea`,value:n,onChange:d=>r(d.target.value),autoFocus:!0,onFocus:d=>{n.length<40&&d.target.select()},onKeyDown:a}),o.jsx("span",{className:t,style:Object.assign({visibility:"hidden",height:"auto",gridArea:"1 / 1 / 2 / 2",color:"red",opacity:.9,whiteSpace:"pre-wrap",overflowY:"auto",border:"1px solid transparent"},i),children:p})]})},Xe=t=>t!==null&&typeof t=="object",Xt=(t,e,n,r="")=>{if(!n&&!r)return!0;switch(t){case"collection":if(n){if(n(e,r))return!0;if(!Dt(r,e,n))return!1}if(!n&&r&&!Dt(r,e))return!1;break;case"value":if(n&&!n(e,r)||!n&&r&&!qe(e,r))return!1}return!0},Dt=(t="",e,n=qe)=>{const r=e.value;return Object.entries(r).some((([a,i])=>{const s=[...e.path,a],p=Object.assign(Object.assign({},e),{key:a,path:s,level:e.level+1,value:i,size:s.length,parentData:r});return Xe(i)?Dt(t,p,n):n(p,t)}))},qe=(t,e="")=>{const{value:n}=t;if(n===null&&"null".includes(e.toLowerCase()))return!0;switch(typeof n){case"string":return n.toLowerCase().includes(e.toLowerCase());case"number":return!!String(n).includes(e);case"boolean":return n?"true".includes(e.toLowerCase())||e==="1":"false".includes(e.toLowerCase())||e==="0";default:return!1}},Wt=({key:t,path:e},n="")=>!!qe({value:t},n)||!!e.some((r=>qe({value:r},n))),$e=(t,e)=>(e??"")+t.map((n=>n===""?"\0":n)).join("."),Nt=t=>t.shiftKey?"Shift":t.metaKey?"Meta":t.ctrlKey?"Control":t.altKey?"Alt":void 0,Mn=(t,e,n)=>{const r=t.key,a=Nt(t);if(Array.isArray(e))return!!a&&e.includes(a);const{key:i,modifier:s}=e;return(n!=="stringLineBreak"||r!=="Enter"||a!=="Shift"||i!=="Enter"||!s?.includes("Shift"))&&r===i&&(s===a||Array.isArray(s)&&s.includes(a))},Fe={key:"Enter"},Ut={confirm:Fe,cancel:{key:"Escape"},objectConfirm:Object.assign(Object.assign({},Fe),{modifier:["Meta","Shift","Control"]}),objectLineBreak:Fe,stringConfirm:Fe,stringLineBreak:Object.assign(Object.assign({},Fe),{modifier:["Shift"]}),numberConfirm:Fe,numberUp:{key:"ArrowUp"},numberDown:{key:"ArrowDown"},tabForward:{key:"Tab"},tabBack:{key:"Tab",modifier:"Shift"},booleanConfirm:Fe,booleanToggle:{key:" "},clipboardModifier:["Meta","Control"],collapseModifier:["Alt"]},Be=(t,e,n="next",r)=>{const a=e.slice(0,e.length-1),i=e.slice(-1)[0];if(i===void 0)return null;const s=Qe(t,a),p=Fn(s);Array.isArray(s)||r(p,(({key:c,value:u})=>[c,u]));const d=p.findIndex((c=>c.key===i)),l=p[d+(n==="next"?1:-1)];return l?Xe(l.value)?Object.keys(l.value).length===0?Be(t,[...a,l.key],n,r):qt(t,[...a,l.key],n,r):[...a,l.key]:a.length===0?null:Be(t,a,n,r)},qt=(t,e,n="next",r)=>{const a=Qe(t,e);if(!Xe(a))return e;const i=Array.isArray(a)?a.map(((p,d)=>d)):Object.keys(a);r(i,(p=>[p,a]));const s=n==="next"?i[0]:i[i.length-1];return qt(t,[...e,s],n,r)},Fn=t=>Array.isArray(t)?t.map(((e,n)=>({index:n,value:e,key:n}))):Object.entries(t).map((([e,n],r)=>({key:e,value:n,index:r}))),en=(t,e)=>{var n,r,a,i;const s=t.current,p=(n=s?.selectionStart)!==null&&n!==void 0?n:1/0,d=(r=s?.selectionEnd)!==null&&r!==void 0?r:1/0,l=((a=s?.textContent)===null||a===void 0?void 0:a.slice(0,p))+e+((i=s?.textContent)===null||i===void 0?void 0:i.slice(d));return s.value=l,s?.setSelectionRange(p+1,p+1),l},Ot=t=>{if(t!==tn){if(Array.isArray(t))return t.map((e=>Ot(e)));if(t&&typeof t=="object")for(const e in t)t[e]=Ot(t[e]);return t}},tn="__â€‹undefined__",Tt={displayName:"Default",fragments:{edit:"rgb(42, 161, 152)"},styles:{container:{backgroundColor:"#f6f6f6",fontFamily:"monospace"},collection:{},collectionInner:{},collectionElement:{},dropZone:{},property:"#292929",bracket:{color:"rgb(0, 43, 54)",fontWeight:"bold"},itemCount:{color:"rgba(0, 0, 0, 0.3)",fontStyle:"italic"},string:"rgb(203, 75, 22)",number:"rgb(38, 139, 210)",boolean:"green",null:{color:"rgb(220, 50, 47)",fontVariant:"small-caps",fontWeight:"bold"},input:["#292929"],inputHighlight:"#b3d8ff",error:{fontSize:"0.8em",color:"red",fontWeight:"bold"},iconCollection:"rgb(0, 43, 54)",iconEdit:"edit",iconDelete:"rgb(203, 75, 22)",iconAdd:"edit",iconCopy:"rgb(38, 139, 210)",iconOk:"green",iconCancel:"rgb(203, 75, 22)"}},nn=h.createContext({getStyles:()=>({}),icons:{}}),zn=({theme:t=Tt,icons:e={},docRoot:n,children:r})=>{const a=Bn(t,n);return o.jsx(nn.Provider,{value:{getStyles:(i,s)=>typeof a[i]=="function"?a[i](s):a[i],icons:e},children:r})},Ne=()=>h.useContext(nn),Bn=(t,e)=>{var n,r,a,i;const s={},p=(Array.isArray(t)?t:[t]).map((c=>Wn(c)?Ct({fragments:{},styles:c},s):Ct(c,s))),d=Ct(Tt,{});Object.keys(d).forEach((c=>{const u=c;p.forEach((m=>{m[u]&&(d[u]=Object.assign(Object.assign({},d[u]),m[u]))}))}));const l=Object.assign({},d);return Object.entries(s).forEach((([c,u])=>{const m=c;l[m]=y=>{const g=u(y)||{};return Object.assign(Object.assign({},d[m]),g)}})),typeof l?.inputHighlight!="function"&&(!((n=l?.inputHighlight)===null||n===void 0)&&n.backgroundColor)&&e.style.setProperty("--jer-highlight-color",(r=l?.inputHighlight)===null||r===void 0?void 0:r.backgroundColor),typeof l?.iconCopy!="function"&&(!((a=l?.iconCopy)===null||a===void 0)&&a.color)&&e.style.setProperty("--jer-icon-copy-color",(i=l?.iconCopy)===null||i===void 0?void 0:i.color),l},Ct=(t,e)=>{const{fragments:n,styles:r}=t,a={};return Object.entries(r).forEach((([i,s])=>{const p=(Array.isArray(s)?s:[s]).reduce(((d,l)=>{var c,u;if(typeof l=="function")return e[i]=l,Object.assign({},d);if(typeof l=="string"){const m=(c=n?.[l])!==null&&c!==void 0?c:l;return typeof m=="string"?Object.assign(Object.assign({},d),{[(u=Un[i])!==null&&u!==void 0?u:"color"]:m}):Object.assign(Object.assign({},d),m)}return Object.assign(Object.assign({},d),l)}),{});a[i]=p})),a},Wn=t=>!("styles"in t),Un={container:"backgroundColor",collection:"backgroundColor",collectionInner:"backgroundColor",collectionElement:"backgroundColor",dropZone:"borderColor",inputHighlight:"backgroundColor"},rn=h.createContext(null),$n=({children:t,onEditEvent:e,onCollapse:n})=>{const[r,a]=h.useState(null),[i,s]=h.useState(null),[p,d]=h.useState(null),[l,c]=h.useState({path:null,pathString:null}),u=h.useRef(null),m=h.useRef("next"),y=h.useRef(null);return o.jsx(rn.Provider,{value:{collapseState:r,setCollapseState:g=>{a(g),n&&g!==null&&(Array.isArray(g)?g.forEach((b=>n(b))):n(g)),g!==null&&setTimeout((()=>a(null)),2e3)},getMatchingCollapseState:g=>{if(Array.isArray(r)){for(const b of r)if($t(g,b))return b;return null}return $t(g,r)?r:null},currentlyEditingElement:i,setCurrentlyEditingElement:(g,b)=>{const T=typeof g=="string"||g===null?g:$e(g,b==="key"?"key_":void 0);i!==null&&T!==null&&u.current!==null&&u.current(),s(T),e&&(Array.isArray(g)||g===null)&&e(g,b==="key"),u.current=typeof b=="function"?b:null},areChildrenBeingEdited:g=>i!==null&&i.includes(g),previouslyEditedElement:y.current,setPreviouslyEditedElement:g=>{y.current=g},tabDirection:m.current,setTabDirection:g=>{m.current=g},previousValue:p,setPreviousValue:d,dragSource:l,setDragSource:c},children:t})},Ue=()=>{const t=h.useContext(rn);if(!t)throw new Error("Missing Context Provider");return t},$t=(t,e)=>{if(e===null)return!1;if(!e.includeChildren)return e.path.every(((n,r)=>t[r]===n))&&e.path.length===t.length;for(const[n,r]of e.path.entries())if(r!==t[n])return!1;return!0},kt="**INVALID_FUNCTION**",Yn=({nodeData:t,showStringQuotes:e=!0,stringTruncate:n=200,pathString:r,canEdit:a,setIsEditing:i,styles:s,translate:p,value:d,TextWrapper:l=({children:c})=>c})=>{const c=d??t.value,[u,m]=h.useState(!1),y=e?'"':"",g=c.length>n,b=()=>{a?i(!0):m(!u)};return o.jsxs("div",{id:`${r}_display`,onDoubleClick:b,onClick:T=>{(T.getModifierState("Control")||T.getModifierState("Meta"))&&b()},className:"jer-value-string",style:s,children:[y,g?o.jsxs(o.Fragment,u?{children:[o.jsx(l,{children:o.jsxs("span",{children:[c,y]})}),o.jsxs("span",{className:"jer-string-expansion jer-show-less",onClick:()=>m(!1),children:[" ",p("SHOW_LESS",t)]})]}:{children:[o.jsxs(l,{children:[o.jsx("span",{children:c.slice(0,n-2).trimEnd()})," "]}),o.jsx("span",{className:"jer-string-expansion jer-ellipsis",onClick:()=>m(!0),children:"..."}),y]}):o.jsx(l,{children:`${c}${y}`})]})},Hn=({styles:t,pathString:e,value:n,setValue:r,handleEdit:a,handleKeyboard:i,keyboardCommon:s})=>{const p=h.useRef(null);return o.jsx(Qt,{className:"jer-input-text",textAreaRef:p,name:e,value:n,setValue:r,handleKeyPress:d=>{i(d,Object.assign({stringConfirm:a,stringLineBreak:()=>{const l=en(p,`
`);r(l)}},s))},styles:t})},Jn=t=>{var{isEditing:e,path:n,enumType:r}=t,a=Zt(t,["isEditing","path","enumType"]);const{getStyles:i}=Ne(),s=$e(n),{value:p,setValue:d,nodeData:l,handleEdit:c,handleKeyboard:u,keyboardCommon:m}=a;return e&&r?o.jsxs("div",{className:"jer-select jer-select-enums",children:[o.jsx("select",{name:`${s}-value-select`,className:"jer-select-inner",onChange:y=>d(y.target.value),value:p,autoFocus:!0,onKeyDown:y=>{u(y,Object.assign({stringConfirm:c},m))},children:r.values.map((y=>o.jsx("option",{value:y,children:y},y)))}),o.jsx("span",{className:"focus"})]}):e?o.jsx(Hn,Object.assign({styles:i("input",l),pathString:s},a,{setValue:a.setValue})):o.jsx(Yn,Object.assign({pathString:s,styles:i("string",l)},a))},Gn=({value:t,setValue:e,isEditing:n,path:r,setIsEditing:a,handleEdit:i,nodeData:s,handleKeyboard:p,keyboardCommon:d})=>{const{getStyles:l}=Ne();return n?o.jsx("input",{className:"jer-input-number",type:"text",name:$e(r),value:t,onChange:c=>e(c.target.value.replace(/[^0-9.-]/g,"")),autoFocus:!0,onFocus:c=>setTimeout((()=>c.target.select()),10),onKeyDown:c=>p(c,Object.assign({numberConfirm:i,numberUp:()=>e(Number(t)+1),numberDown:()=>e(Number(t)-1)},d)),style:Object.assign({width:String(t).length/1.5+2+"em"},l("input",s))}):o.jsx("span",{onDoubleClick:()=>a(!0),className:"jer-value-number",style:l("number",s),children:t})},Zn=({value:t,setValue:e,isEditing:n,path:r,setIsEditing:a,handleEdit:i,nodeData:s,handleKeyboard:p,keyboardCommon:d})=>{const{getStyles:l}=Ne();return typeof t!="boolean"?null:n?o.jsx("input",{className:"jer-input-boolean",type:"checkbox",name:$e(r),checked:t,onChange:()=>e(!t),onKeyDown:c=>{c.key===" "&&c.preventDefault(),p(c,Object.assign({booleanConfirm:i,booleanToggle:()=>e(!t)},d))},autoFocus:!0}):o.jsx("span",{onDoubleClick:()=>a(!0),className:"jer-value-boolean",style:l("boolean",s),children:String(t)})},Qn=(t,e)=>{const n=h.useRef(void 0),r=h.useRef(e);h.useEffect((()=>{r.current=e}),[e]);const a=i=>{r.current(i)};h.useEffect((()=>{if(window.clearTimeout(n.current),t)return n.current=window.setTimeout((()=>{window.addEventListener("keydown",a)}),100),()=>{window.clearTimeout(n.current),window.removeEventListener("keydown",a)}}),[t])},Xn=({value:t,isEditing:e,setIsEditing:n,handleEdit:r,nodeData:a,handleKeyboard:i,keyboardCommon:s})=>{const{getStyles:p}=Ne();return Qn(e,(d=>i(d,Object.assign({confirm:r},s)))),o.jsx("div",{onDoubleClick:()=>n(!0),className:"jer-value-null",style:p("null",a),children:String(t)})},qn=({value:t})=>{let e="Error!";switch(typeof t){case"string":t===kt&&(e="Function");break;case"undefined":e="Undefined";break;case"symbol":e="Symbol"}return o.jsx("span",{className:"jer-value-invalid",children:e})},er=({size:t,style:e,className:n})=>o.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:t,height:t,className:n,style:e,children:[o.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4z"}),o.jsx("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"})]}),tr=({size:t,style:e,className:n})=>o.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:t,height:t,className:n,style:e,transform:"translate(0, 0.5)",children:[o.jsx("path",{d:"M7 17.013l4.413-.015 9.632-9.54c.378-.378.586-.88.586-1.414s-.208-1.036-.586-1.414l-1.586-1.586c-.756-.756-2.075-.752-2.825-.003L7 12.583v4.43zM18.045 4.458l1.589 1.583-1.597 1.582-1.586-1.585 1.594-1.58zM9 13.417l6.03-5.973 1.586 1.586-6.029 5.971L9 15.006v-1.589z"}),o.jsx("path",{d:"M5 21h14c1.103 0 2-.897 2-2v-8.668l-2 2V19H8.158c-.026 0-.053.01-.079.01-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2z"})]}),nr=({size:t,style:e,className:n})=>o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:t,height:t,className:n,style:e,children:o.jsx("path",{d:"M6 19a2 2 0 002 2h8a2 2 0 002-2V7H6v12m2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12M15.5 4l-1-1h-5l-1 1H5v2h14V4h-3.5z"})}),rr=({size:t,style:e,className:n})=>o.jsxs("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:t,height:t,className:n,style:e,children:[o.jsx("path",{d:"M9 2 H15 A1 1 0 0 1 16 3 V5 A1 1 0 0 1 15 6 H9 A1 1 0 0 1 8 5 V3 A1 1 0 0 1 9 2 z"}),o.jsx("path",{d:"M8 4H6a2 2 0 00-2 2v14a2 2 0 002 2h12a2 2 0 002-2v-2M16 4h2a2 2 0 012 2v4M21 14H11"}),o.jsx("path",{d:"M15 10l-4 4 4 4"})]}),or=({size:t,style:e,className:n})=>o.jsxs("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:t,height:t,className:n,style:e,children:[o.jsx("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),o.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),ar=({size:t,style:e,className:n})=>o.jsx("svg",{baseProfile:"tiny",viewBox:"0 0 24 24",fill:"currentColor",width:t,height:t,className:n,style:e,children:o.jsx("path",{d:"M12 4c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zm-5 8c0-.832.224-1.604.584-2.295l6.711 6.711A4.943 4.943 0 0112 17c-2.757 0-5-2.243-5-5zm9.416 2.295L9.705 7.584A4.943 4.943 0 0112 7c2.757 0 5 2.243 5 5 0 .832-.224 1.604-.584 2.295z"})}),sr=({size:t,style:e,className:n})=>o.jsx("svg",{viewBox:"0 0 512 512",fill:"currentColor",width:t,height:t,className:n,style:e,children:o.jsx("path",{d:"M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"})}),We=({name:t,nodeData:e})=>{var n,r,a,i,s,p,d;const{getStyles:l,icons:c}=Ne(),u={size:"1.4em",className:"jer-icon"};switch(t){case"add":return(n=c?.add)!==null&&n!==void 0?n:o.jsx(er,Object.assign({},u,{style:l("iconAdd",e)}));case"edit":return(r=c?.edit)!==null&&r!==void 0?r:o.jsx(tr,Object.assign({},u,{style:l("iconEdit",e)}));case"delete":return(a=c?.delete)!==null&&a!==void 0?a:o.jsx(nr,Object.assign({},u,{style:l("iconDelete",e),size:"1.45em"}));case"copy":return(i=c?.copy)!==null&&i!==void 0?i:o.jsx(rr,Object.assign({},u,{style:l("iconCopy",e),size:"1.2em"}));case"ok":return(s=c?.ok)!==null&&s!==void 0?s:o.jsx(or,Object.assign({},u,{style:Object.assign({fontSize:"90%"},l("iconOk",e))}));case"cancel":return(p=c?.cancel)!==null&&p!==void 0?p:o.jsx(ar,Object.assign({},u,{style:Object.assign({fontSize:"130%"},l("iconCancel",e))}));case"chevron":return(d=c?.chevron)!==null&&d!==void 0?d:o.jsx(sr,{size:"1em",style:l("iconCollection",e)});default:return o.jsx(o.Fragment,{})}},on=({startEdit:t,handleDelete:e,handleAdd:n,enableClipboard:r,type:a,customButtons:i,nodeData:s,translate:p,keyboardControls:d,handleKeyboard:l,editConfirmRef:c,getNewKeyOptions:u,jsonStringify:m,onEditEvent:y,showIconTooltips:g})=>{const{getStyles:b}=Ne(),T=p("KEY_NEW",s),[k,C]=h.useState(T),[D,U]=h.useState(!1),{key:$,path:x,value:M}=s,J=Array.isArray(D),G=O=>{var N;if(y&&y(O?[...x,null]:null,O),!O)return void U(!1);const I=Object.keys(Qe(s.fullData,x)),Z=u?(N=u(s))===null||N===void 0?void 0:N.filter((se=>!I.includes(se))):null;Z&&C(""),U(Z==null||Z)};return o.jsxs("div",{className:"jer-edit-buttons",style:{opacity:D?1:void 0},onClick:O=>O.stopPropagation(),children:[r&&o.jsx("div",{onClick:O=>{var N;O.stopPropagation();let I,Z,se="value",Q="",ne=null;if(r){const X=Nt(O);if(X&&d.clipboardModifier.includes(X)?(I=ir(x),Q=I,se="path"):(I=M,Q=typeof I=="object"?m(M):String(I)),!navigator.clipboard)return void(typeof r=="function"&&r({success:!1,value:I,stringValue:Q,path:x,key:$,type:se,errorMessage:"Can't access clipboard API"}));(N=navigator.clipboard)===null||N===void 0||N.writeText(Q).then((()=>Z=!0)).catch((z=>{Z=!1,ne=z.message})).finally((()=>{typeof r=="function"&&r({success:Z,errorMessage:ne,value:I,stringValue:Q,path:x,key:$,type:se})}))}},className:"jer-copy-pulse",title:g?p("TOOLTIP_COPY",s):"",children:o.jsx(We,{name:"copy",nodeData:s})}),t&&o.jsx("div",{onClick:t,title:g?p("TOOLTIP_EDIT",s):"",children:o.jsx(We,{name:"edit",nodeData:s})}),e&&o.jsx("div",{onClick:e,title:g?p("TOOLTIP_DELETE",s):"",children:o.jsx(We,{name:"delete",nodeData:s})}),n&&o.jsx("div",{onClick:()=>{a==="object"?G(!0):n("")},title:g?p("TOOLTIP_ADD",s):"",children:o.jsx(We,{name:"add",nodeData:s})}),i?.map((({Element:O,onClick:N},I)=>o.jsx("div",{onClick:Z=>N&&N(s,Z),children:o.jsx(O,{nodeData:s})},I))),D&&n&&a==="object"&&o.jsxs(o.Fragment,{children:[J?o.jsxs("div",{className:"jer-select jer-select-keys",children:[o.jsxs("select",{name:"new-key-select",className:"jer-select-inner",onChange:O=>{n(O.target.value),G(!1)},defaultValue:"",autoFocus:!0,onKeyDown:O=>{l(O,{cancel:()=>G(!1)})},children:[o.jsx("option",{value:"",disabled:!0,children:D.length>0?p("KEY_SELECT",s):p("NO_KEY_OPTIONS",s)}),D.map((O=>o.jsx("option",{value:O,children:O},O)))]}),o.jsx("span",{className:"focus"})]}):o.jsx("input",{className:"jer-input-new-key",type:"text",name:"new-object-key",value:k,onChange:O=>C(O.target.value),autoFocus:!0,onFocus:O=>O.target.select(),onKeyDown:O=>{l(O,{stringConfirm:()=>{n&&(G(!1),n(k),C(T))},cancel:()=>{G(!1),C(T)}})},style:b("input",s)}),o.jsx(At,{onOk:()=>{J&&!k||(G(!1),n(k))},onCancel:()=>{G(!1)},nodeData:s,editConfirmRef:c,hideOk:J})]})]})},At=({onOk:t,onCancel:e,nodeData:n,editConfirmRef:r,hideOk:a=!1})=>o.jsxs("div",{className:"jer-confirm-buttons",children:[!a&&o.jsx("div",{onClick:t,ref:r,children:o.jsx(We,{name:"ok",nodeData:n})}),o.jsx("div",{onClick:e,children:o.jsx(We,{name:"cancel",nodeData:n})})]}),ir=t=>t.reduce(((e,n)=>typeof n=="number"?`${e}[${n}]`:e===""?n:`${e}.${n}`),""),lr=["string","number","boolean","null","object","array"],an=({props:t,collapsed:e})=>{const{data:n,nodeData:r,parentData:a,onEdit:i,onError:s,showErrorMessages:p,restrictEditFilter:d,restrictDeleteFilter:l,restrictAddFilter:c,restrictDragFilter:u,translate:m,errorMessageTimeout:y}=t,{currentlyEditingElement:g,setCurrentlyEditingElement:b}=Ue(),[T,k]=h.useState(null),C=Object.assign(Object.assign({},r),{collapsed:e}),{path:D,key:U,size:$}=C,x=$e(D),M=!d(C),J=!l(C),G=!c(C),O=!u(C)&&J&&g===null,N=z=>{p&&(k(z),setTimeout((()=>k(null)),y)),console.warn("Error",z)},I=h.useCallback(((z,B)=>{N(z.message),s&&s({currentData:C.fullData,errorValue:B,currentValue:n,name:U,path:D,error:z})}),[s,p]),Z=g===x,se=g===`key_${x}`,Q=typeof D.slice(-1)[0]=="number",ne={isEditing:Z,isEditingKey:se,isArray:Q,canEditKey:a!==null&&M&&G&&J&&!Q},X=U===""&&D.length>0?m("EMPTY_STRING",C):null;return{pathString:x,nodeData:C,path:D,name:U,size:$,canEdit:M,canDelete:J,canAdd:G,canDrag:O,error:T,showError:N,onError:I,setError:k,handleEditKey:z=>{if(b(null),U===z||!a)return;const B=D.slice(0,-1);if(Object.keys(a).includes(z))return void I({code:"KEY_EXISTS",message:m("ERROR_KEY_EXISTS",C)},z);const ue=Object.fromEntries(Object.entries(a).map((([W,R])=>W===U?[z,R]:[W,R])));i(ue,B).then((W=>{W&&I({code:"UPDATE_ERROR",message:W},z)}))},derivedValues:ne,emptyStringKey:X}},sn=({canDrag:t,canDragOnto:e,path:n,nodeData:r,onMove:a,onError:i,translate:s})=>{const{getStyles:p}=Ne(),{dragSource:d,setDragSource:l}=Ue(),[c,u]=h.useState(!1),m=$e(n),y=h.useMemo((()=>t?{onDragStart:k=>{k.stopPropagation(),l({path:n,pathString:m})},onDragEnd:k=>{k.stopPropagation(),l({path:null,pathString:null})}}:{}),[t,m]),g=h.useMemo((()=>k=>e?{onDragOver:C=>{C.stopPropagation(),C.preventDefault()},onDrop:C=>{C.stopPropagation(),T(k),l({path:null,pathString:null}),u(!1)},onDragEnter:C=>{var D;C.stopPropagation(),m.startsWith((D=d.pathString)!==null&&D!==void 0?D:"")||u(k)},onDragExit:C=>{C.stopPropagation(),u(!1)}}:{}),[d,e,m]),b=h.useMemo((()=>e&&d.pathString!==null?o.jsx("div",Object.assign({className:"jer-drop-target-bottom",style:{height:"50%",position:"absolute",width:"100%",top:"50%",zIndex:n.length}},g("below"))):null),[d,e,n.length]),T=k=>{var C,D;const U=(C=d.path)===null||C===void 0?void 0:C.slice(-1)[0],$=(D=d.path)===null||D===void 0?void 0:D.slice(0,-1).join("."),x=n.slice(0,-1).join(""),{parentData:M}=r;typeof U=="string"&&M&&!Array.isArray(M)&&Object.keys(M).includes(U)&&U in M&&$!==x?i({code:"KEY_EXISTS",message:s("ERROR_KEY_EXISTS",r)},U):a(d.path,n,k).then((J=>{J&&i({code:"UPDATE_ERROR",message:J},r.value)}))};return{dragSourceProps:y,getDropTargetProps:g,BottomDropTarget:b,DropTargetPadding:({position:k,nodeData:C})=>c===k?o.jsx("div",{className:"jer-drag-n-drop-padding",style:p("dropZone",C)}):null,handleDrop:T}},cr=(t,e,n,r)=>{var a,i,s;if(!e.current)return 0;const p=parseInt((a=getComputedStyle(n.current).getPropertyValue("line-height"))!==null&&a!==void 0?a:"16px"),d=((s=(i=e.current)===null||i===void 0?void 0:i.offsetWidth)!==null&&s!==void 0?s:0)/(.5*p),l=r(t).replace(/\\n/g,`
`).split(`
`).map((c=>Math.ceil(c.length/d))).reduce(((c,u)=>c+u),0)*p;return Math.min(l+30,window.innerHeight-50)},pt=({isEditingKey:t,canEditKey:e,pathString:n,path:r,name:a,arrayIndexFromOne:i,handleKeyboard:s,handleEditKey:p,handleCancel:d,handleClick:l,keyValueArray:c,styles:u,getNextOrPrevious:m,emptyStringKey:y})=>{const{setCurrentlyEditingElement:g}=Ue(),b=typeof a=="number"?String(a+(i?1:0)):a;return t?o.jsx("input",{className:"jer-input-text jer-key-edit",type:"text",name:n,defaultValue:b,autoFocus:!0,onFocus:T=>T.target.select(),onKeyDown:T=>s(T,{stringConfirm:()=>p(T.target.value),cancel:d,tabForward:()=>{if(p(T.target.value),c){const k=c?.[0][0];g(k?[...r,k]:m("next"))}else g(r)},tabBack:()=>{p(T.target.value),g(m("prev"))}}),style:{width:b.length/1.5+.5+"em"}}):o.jsxs("span",{className:"jer-key-text",style:Object.assign(Object.assign({},u),{minWidth:`${Math.min(b.length+1,5)}ch`,flexShrink:b.length>10?1:0}),onDoubleClick:()=>e&&g(r,"key"),onClick:l,children:[y?o.jsx("span",{className:"jer-empty-string",children:y}):b,b!==""||y?o.jsx("span",{className:"jer-key-colon",children:":"}):null]})},ln=t=>{const{data:e,parentData:n,onEdit:r,onDelete:a,onChange:i,onMove:s,enableClipboard:p,canDragOnto:d,restrictTypeSelection:l,searchFilter:c,searchText:u,showLabel:m,stringTruncate:y,showStringQuotes:g,arrayIndexFromOne:b,indent:T,translate:k,customNodeDefinitions:C,customNodeData:D,handleKeyboard:U,keyboardControls:$,sort:x,editConfirmRef:M,jsonStringify:J,showIconTooltips:G}=t,{getStyles:O}=Ne(),{setCurrentlyEditingElement:N,setCollapseState:I,previouslyEditedElement:Z,setPreviouslyEditedElement:se,tabDirection:Q,setTabDirection:ne,previousValue:X,setPreviousValue:z}=Ue(),[B,ue]=h.useState(typeof e=="function"?kt:e),{pathString:W,nodeData:R,path:P,name:Y,canEdit:te,canDelete:me,canDrag:de,error:fe,onError:re,handleEditKey:oe,emptyStringKey:Ce,derivedValues:ie}=an({props:t}),{dragSourceProps:ye,getDropTargetProps:De,BottomDropTarget:H,DropTargetPadding:ae}=sn({canDrag:de,canDragOnto:d,path:P,nodeData:R,onMove:s,onError:re,translate:k}),[be,je]=h.useState(St(e,D)),A=h.useCallback((f=>{if(!i)return void ue(f);const E=i({currentData:R.fullData,newValue:f,currentValue:B,name:Y,path:P});ue(E)}),[i]);h.useEffect((()=>{ue(typeof e=="function"?kt:e),je(St(e,D))}),[e,fe]);const{CustomNode:_,customNodeProps:q,hideKey:Ae,showEditTools:Oe=!0,showOnEdit:Re,showOnView:Pe,passOriginalNode:Ve}=D,Ie=[...lr,...C.filter((({showInTypesSelector:f=!1,name:E})=>f&&!!E)).map((({name:f})=>f))],Te=h.useMemo((()=>{if(typeof l=="boolean")return l?[]:Ie;if(Array.isArray(l))return l;const f=l(R);return typeof f=="boolean"?f?[]:Ie:f}),[R,l]),[he,Ke]=h.useState(((f,E)=>{var L;if(typeof f!="string")return null;const pe=E.filter((ee=>ee instanceof Object&&ee.enum&&ee.values.includes(f)&&ee.matchPriority));return pe.sort(((ee,ce)=>{var _e,Me;return((_e=ce.matchPriority)!==null&&_e!==void 0?_e:0)-((Me=ee.matchPriority)!==null&&Me!==void 0?Me:0)})),(L=pe[0])!==null&&L!==void 0?L:null})(B,Te)),{isEditing:ge}=ie,Ye=Xt("value",R,c,u);if(ge&&(!Ye||!te)){const f=Be(R.fullData,P,Q,x);N(f||Z)}if(!Ye)return null;const ke=f=>{let E;if(N(null),z(null),f===void 0||(L=>L&&typeof L=="object"&&"type"in L&&"target"in L&&"preventDefault"in L&&typeof L.preventDefault=="function")(f))switch(be){case"object":E={[k("DEFAULT_NEW_KEY",R)]:B};break;case"array":E=B??[];break;case"number":{const L=Number(B);E=isNaN(L)?0:L;break}default:E=B}else E=f;r(E,P).then((L=>{L&&re({code:"UPDATE_ERROR",message:L},E)}))},xe=()=>{N(null),X===null?(ue(e),z(null)):r(X,P)},{isEditingKey:He,canEditKey:Je}=ie,ve=!ge&&fe,le=ge&&Te.length>1,Le=(be!=="invalid"||_)&&!fe&&Oe,w=m&&!Ae,v=_&&(ge&&Re||!ge&&Pe),S={value:B,parentData:n,setValue:A,isEditing:ge,canEdit:te,setIsEditing:te?()=>N(P):()=>{},handleEdit:ke,handleCancel:xe,path:P,stringTruncate:y,showStringQuotes:g,nodeData:R,enumType:he,translate:k,handleKeyboard:U,keyboardCommon:{cancel:xe,tabForward:()=>{ne("next"),se(W);const f=Be(R.fullData,P,"next",x);f&&(ke(),N(f))},tabBack:()=>{ne("prev"),se(W);const f=Be(R.fullData,P,"prev",x);f&&(ke(),N(f))}}},K={canEditKey:Je,isEditingKey:He,pathString:W,path:P,name:Y,arrayIndexFromOne:b,handleKeyboard:U,handleEditKey:oe,handleCancel:xe,styles:O("property",R),getNextOrPrevious:f=>Be(R.fullData,P,f,x),emptyStringKey:Ce},V=v?o.jsx(_,Object.assign({},t,{value:B,customNodeProps:q,setValue:A,handleEdit:ke,handleCancel:xe,handleKeyPress:f=>U(f,{stringConfirm:ke,cancel:xe}),isEditing:ge,setIsEditing:()=>N(P),getStyles:O,originalNode:Ve?Yt(e,S):void 0,originalNodeKey:Ve?o.jsx(pt,Object.assign({},K)):void 0,canEdit:te,keyboardCommon:S.keyboardCommon,onError:re})):Yt(e,S);return o.jsxs("div",Object.assign({className:"jer-component jer-value-component",style:{marginLeft:n!==null?T/2+"em":0,position:"relative"},draggable:de},ye,De("above"),{children:[H,o.jsx(ae,{position:"above",nodeData:R}),o.jsxs("div",{className:"jer-value-main-row",style:{flexWrap:Y.length>10?"wrap":"nowrap"},children:[w&&o.jsx(pt,Object.assign({},K)),o.jsxs("div",{className:"jer-value-and-buttons",children:[o.jsx("div",{className:"jer-input-component",children:V}),ge?o.jsx(At,{onOk:ke,onCancel:xe,nodeData:R,editConfirmRef:M}):Le&&o.jsx(on,{startEdit:te?()=>{z(X),N(P,xe)}:void 0,handleDelete:me?()=>{a(B,P).then((f=>{f&&re({code:"DELETE_ERROR",message:f},B)}))}:void 0,enableClipboard:p,translate:k,customButtons:t.customButtons,nodeData:R,handleKeyboard:U,keyboardControls:$,editConfirmRef:M,jsonStringify:J,showIconTooltips:G}),le&&o.jsxs("div",{className:"jer-select jer-select-types",children:[o.jsx("select",{name:`${Y}-type-select`,className:"jer-select-inner",onChange:f=>(E=>{const L=C.find((ce=>ce.name===E));if(L)return r(L.defaultValue,P),je(E),Ke(null),N(null),void I({path:P,collapsed:!1,includeChildren:!1});const pe=Te.find((ce=>ce instanceof Object&&ce.enum===E));if(pe)return typeof B=="string"&&pe.values.includes(B)||r(pe.values[0],P).then((ce=>{ce&&(re({code:"UPDATE_ERROR",message:ce},ee),N(null))})),void Ke(pe);const ee=ur(B,E,k("DEFAULT_NEW_KEY",R),D?.CustomNode?k("DEFAULT_STRING",R):void 0);["string","number","boolean"].includes(E)||N(null),r(ee,P).then((ce=>{ce?(re({code:"UPDATE_ERROR",message:ce},ee),N(null)):Ke(null)}))})(f.target.value),value:he?he.enum:be,children:Te.map((f=>f instanceof Object&&"enum"in f?o.jsx("option",{value:f.enum,children:f.enum},f.enum):o.jsx("option",{value:f,children:f},f)))}),o.jsx("span",{className:"focus"})]}),ve&&o.jsx("span",{className:"jer-error-slug",style:O("error",R),children:fe})]})]}),o.jsx(ae,{position:"below",nodeData:R})]}))},St=(t,e)=>e?.CustomNode&&e?.name&&e.showInTypesSelector?e.name:typeof t=="string"?"string":typeof t=="number"?"number":typeof t=="boolean"?"boolean":t===null?"null":"invalid",Yt=(t,e)=>{const n=St(t),{value:r}=e;switch(n){case"string":return o.jsx(Jn,Object.assign({},e,{value:r}));case"number":return o.jsx(Gn,Object.assign({},e,{value:r}));case"boolean":return o.jsx(Zn,Object.assign({},e,{value:r}));case"null":return o.jsx(Xn,Object.assign({},e));default:return o.jsx(qn,Object.assign({},e))}},ur=(t,e,n,r)=>{switch(e){case"string":return r??String(t);case"number":{const a=Number(t);return isNaN(a)?0:a}case"boolean":return!!t;case"null":return null;case"object":return{[n]:t};case"array":return[t];default:return String(t)}},cn=(t=[],e)=>{const n=t.filter((({condition:g})=>g(e)));if(n.length===0)return{};const r=n[0],{element:a,wrapperElement:i,customNodeProps:s,wrapperProps:p,hideKey:d=!1,showEditTools:l=!0,showOnEdit:c=!1,showOnView:u=!0,showCollectionWrapper:m=!0}=r,y=Zt(r,["element","wrapperElement","customNodeProps","wrapperProps","hideKey","showEditTools","showOnEdit","showOnView","showCollectionWrapper"]);return Object.assign({CustomNode:a,CustomWrapper:i,customNodeProps:s,wrapperProps:p,hideKey:d,showEditTools:l,showOnEdit:c,showOnView:u,showCollectionWrapper:m},y)},un=t=>{const{getStyles:e}=Ne(),{collapseState:n,setCollapseState:r,getMatchingCollapseState:a,currentlyEditingElement:i,setCurrentlyEditingElement:s,areChildrenBeingEdited:p,previousValue:d,setPreviousValue:l}=Ue(),{mainContainerRef:c,data:u,nodeData:m,parentData:y,showCollectionCount:g,onEdit:b,onAdd:T,onDelete:k,canDragOnto:C,collapseFilter:D,collapseAnimationTime:U,onMove:$,enableClipboard:x,onEditEvent:M,showIconTooltips:J,searchFilter:G,searchText:O,indent:N,sort:I,showArrayIndices:Z,arrayIndexFromOne:se,defaultValue:Q,newKeyOptions:ne,translate:X,customNodeDefinitions:z,customNodeData:B,jsonParse:ue,jsonStringify:W,TextEditor:R,keyboardControls:P,handleKeyboard:Y,insertAtTop:te,onCollapse:me,editConfirmRef:de,collapseClickZones:fe}=t,[re,oe]=h.useState(W(u)),Ce=D(m),{contentRef:ie,isAnimating:ye,maxHeight:De,collapsed:H,animateCollapse:ae,cssTransitionValue:be}=((j,F,we,Ee,Se)=>{const[gn,lt]=h.useState(we?0:void 0),[ct,yn]=h.useState(we),yt=h.useRef(!1),bt=h.useRef(null),Mt=h.useRef(0),Ft=h.useRef(0),bn=F/1e3+"s",jn=h.useCallback((jt=>{var vt,Et;if(ct!==jt){switch(window.clearTimeout(Ft.current),yt.current=!0,jt){case!0:{const zt=(Et=(vt=bt.current)===null||vt===void 0?void 0:vt.offsetHeight)!==null&&Et!==void 0?Et:0;Mt.current=zt,lt(zt),setTimeout((()=>{lt(0)}),5);break}case!1:lt(Mt.current||cr(j,bt,Ee,Se))}yn(!ct),Ft.current=window.setTimeout((()=>{yt.current=!1,jt||lt(void 0)}),F)}}),[F,ct,j,Ee,Se]);return{contentRef:bt,isAnimating:yt.current,animateCollapse:jn,maxHeight:gn,collapsed:ct,cssTransitionValue:bn}})(u,U,Ce,c,W),{pathString:je,nodeData:A,path:_,name:q,size:Ae,canEdit:Oe,canDelete:Re,canAdd:Pe,canDrag:Ve,error:Ie,setError:Te,onError:he,handleEditKey:Ke,emptyStringKey:ge,derivedValues:Ye}=an({props:t,collapsed:H}),{dragSourceProps:ke,getDropTargetProps:xe,BottomDropTarget:He,DropTargetPadding:Je}=sn({canDrag:Ve,canDragOnto:C,path:_,nodeData:A,onMove:$,onError:he,translate:X}),ve=h.useRef(!Ce),{isEditing:le,isEditingKey:Le,isArray:w,canEditKey:v}=Ye;h.useEffect((()=>{oe(W(u))}),[u,W]),h.useEffect((()=>{const j=D(A)&&!le;ve.current=!j,ae(j)}),[D]),h.useEffect((()=>{if(n!==null){const j=a(_);j&&(ve.current=!0,ae(j.collapsed))}}),[n]);const S=h.useRef(null),K=h.useCallback(((j,F)=>{if(typeof Q!="function")return Q;const we=Q(j,F);return we!==void 0?we:null}),[Q]),V=h.useCallback((j=>ne?typeof ne!="function"?ne:ne(j):null),[ne]),{CustomNode:f,customNodeProps:E,CustomWrapper:L,wrapperProps:pe={},hideKey:ee,showEditTools:ce=!0,showOnEdit:_e,showOnView:Me,showCollectionWrapper:mt=!0}=B,at=p(je);if(at&&H&&ae(!1),!(Xt("collection",A,G,O)||A.level===0)&&!at)return null;const Ge=Array.isArray(u)?"array":"object",ft=Ge==="array"?{open:"[",close:"]"}:{open:"{",close:"}"},Rt=j=>{if(j.key!=="Tab"||j.getModifierState("Shift"))Y(j,{objectConfirm:it,cancel:et});else{j.preventDefault();const F=en(S,"	");oe(F)}},st=j=>{j.stopPropagation();const F=Nt(j);if(F&&P.collapseModifier.includes(F))return ve.current=!0,void r({collapsed:!H,path:_,includeChildren:!0});i&&i.includes(je)||(ve.current=!0,r(null),me&&me({path:_,collapsed:!H,includeChildren:!1}),ae(!H))},it=()=>{try{const j=ue(re);if(s(null),l(null),Te(null),W(j)===W(u))return;b(j,_).then((F=>{F&&he({code:"UPDATE_ERROR",message:F},j)}))}catch{he({code:"INVALID_JSON",message:X("ERROR_INVALID_JSON",A)},re)}},dn=_.length>0?()=>{k(u,_).then((j=>{j&&he({code:"DELETE_ERROR",message:j},u)}))}:void 0,et=()=>{s(null),d===null?(Te(null),oe(W(u)),l(null)):b(d,_)},Pt=g==="when-closed"?H:g,pn=!le&&ce,mn=(Z||!w)&&!ee&&q!==void 0,fn=f&&(le&&_e||!le&&Me),ht=Object.entries(u).map((([j,F])=>[Ge==="array"?Number(j):j,F]));Ge==="object"&&I(ht,(j=>j));const Vt=ve.current?le?o.jsxs("div",{className:"jer-collection-text-edit",children:[R?o.jsx(R,{value:re,onChange:oe,onKeyDown:j=>Y(j,{objectConfirm:it,cancel:et})}):o.jsx(Qt,{textAreaRef:S,className:"jer-collection-text-area",name:je,value:re,setValue:oe,handleKeyPress:Rt,styles:e("input",A)}),o.jsx("div",{className:"jer-collection-input-button-row",children:o.jsx(At,{onOk:it,onCancel:et,nodeData:A,editConfirmRef:de})})]}):ht.map((([j,F],we)=>{const Ee={key:j,value:F,path:[..._,j],level:_.length+1,index:we,size:Xe(F)?Object.keys(F).length:null,parentData:u,fullData:A.fullData},Se=cn(z,Ee);return o.jsx("div",{className:"jer-collection-element",style:e("collectionElement",Ee),children:Xe(F)&&!Se?.renderCollectionAsValue?o.jsx(un,Object.assign({},t,{data:F,parentData:u,nodeData:Ee,showCollectionCount:g,canDragOnto:Oe,customNodeData:Se}),j):o.jsx(ln,Object.assign({},t,{data:F,parentData:u,nodeData:Ee,canDragOnto:Oe,showLabel:Ge==="object"||Z,customNodeData:Se}),j)},j)})):null,gt=!!mt&&H&&!at;gt||(ve.current=!0);const It=Object.assign(Object.assign({},t),{data:u,value:u,parentData:y,nodeData:A,setValue:j=>Ze(void 0,void 0,void 0,(function*(){return yield b(j,_)})),handleEdit:it,handleCancel:et,handleKeyPress:Rt,isEditing:le,setIsEditing:()=>s(_),getStyles:e,canDragOnto:Oe,canEdit:Oe,keyboardCommon:{},onError:he}),hn=fn?o.jsx(f,Object.assign({customNodeProps:E},It,{children:Vt})):Vt,Kt=pn&&o.jsx(on,{startEdit:Oe?()=>{ve.current=!0,l(null),s(_)}:void 0,handleAdd:Pe?j=>{ae(!1);const F=K(A,j);if(Ge==="array"){const we=te.array?0:u.length,Ee=te.array?{insert:!0}:{};T(F,[..._,we],Ee).then((Se=>{Se&&he({code:"ADD_ERROR",message:Se},F)}))}else if(j in u)he({code:"KEY_EXISTS",message:X("ERROR_KEY_EXISTS",A)},j);else{const we=te.object?{insertBefore:0}:{};T(F,[..._,j],we).then((Ee=>{Ee&&he({code:"ADD_ERROR",message:Ee},F)}))}}:void 0,handleDelete:Re?dn:void 0,enableClipboard:x,type:Ge,nodeData:A,translate:X,customButtons:t.customButtons,keyboardControls:P,handleKeyboard:Y,getNewKeyOptions:V,editConfirmRef:de,jsonStringify:W,onEditEvent:M,showIconTooltips:J}),Lt={canEditKey:v,isEditingKey:Le,pathString:je,path:_,name:q,arrayIndexFromOne:se,handleKeyboard:Y,handleEditKey:Ke,handleCancel:et,keyValueArray:ht,styles:e("property",A),getNextOrPrevious:j=>Be(A.fullData,_,j,I),handleClick:fe.includes("property")?st:j=>j.stopPropagation(),emptyStringKey:ge},_t=o.jsxs("div",Object.assign({className:"jer-component jer-collection-component",style:Object.assign(Object.assign({marginLeft:(_.length===0?0:N/2)+"em"},e("collection",A)),{position:"relative"}),draggable:Ve},ke,xe("above"),{children:[o.jsx("div",{className:"jer-clickzone",style:{width:N/2+1+"em",zIndex:10+2*A.level},onClick:fe.includes("left")?st:void 0}),!le&&He,o.jsx(Je,{position:"above",nodeData:A}),mt?o.jsxs("div",{className:"jer-collection-header-row",style:{position:"relative"},onClick:fe.includes("header")?st:void 0,children:[o.jsxs("div",{className:"jer-collection-name",children:[o.jsx("div",{className:"jer-collapse-icon jer-accordion-icon"+(H?" jer-rotate-90":""),style:{zIndex:11+2*A.level,transition:be},onClick:st,children:o.jsx(We,{name:"chevron",rotate:H,nodeData:A})}),mn&&o.jsx(pt,Object.assign({},Lt)),!le&&o.jsx("span",{className:"jer-brackets jer-bracket-open",style:e("bracket",A),children:ft.open})]}),!le&&Pt&&o.jsx("div",{className:"jer-collection-item-count"+(Pt?" jer-visible":" jer-hidden"),style:Object.assign(Object.assign({},e("itemCount",A)),{transition:be}),children:Ae===1?X("ITEM_SINGLE",Object.assign(Object.assign({},A),{size:1}),1):X("ITEMS_MULTIPLE",A,Ae)}),o.jsx("div",{className:"jer-brackets"+(gt?" jer-visible":" jer-hidden"),style:Object.assign(Object.assign({},e("bracket",A)),{transition:be}),children:ft.close}),Kt]}):ee?o.jsx(o.Fragment,{}):o.jsxs("div",{className:"jer-collection-header-row",style:{position:"relative"},children:[o.jsx(pt,Object.assign({},Lt)),Kt]}),o.jsxs("div",{className:"jer-collection-inner",style:Object.assign(Object.assign({overflowY:gt||ye?"clip":"visible",maxHeight:at?void 0:De},e("collectionInner",A)),{transition:be}),ref:ie,children:[hn,o.jsx("div",{className:le?"jer-collection-error-row":"jer-collection-error-row-edit",children:Ie&&o.jsx("span",{className:"jer-error-slug",style:e("error",A),children:Ie})}),!le&&mt&&o.jsx("div",{className:"jer-brackets jer-bracket-outside",style:Object.assign(Object.assign({},e("bracket",A)),{marginLeft:(N<3?-1:N<6?-.5:0)+"em"}),children:ft.close})]}),o.jsx(Je,{position:"below",nodeData:A})]}));return L?o.jsx(L,Object.assign({customNodeProps:pe},It,{children:_t})):_t},dr={ITEM_SINGLE:"{{count}} item",ITEMS_MULTIPLE:"{{count}} items",KEY_NEW:"Enter new key",KEY_SELECT:"Select key",NO_KEY_OPTIONS:"No key options",ERROR_KEY_EXISTS:"Key already exists",ERROR_INVALID_JSON:"Invalid JSON",ERROR_UPDATE:"Update unsuccessful",ERROR_DELETE:"Delete unsuccessful",ERROR_ADD:"Adding node unsuccessful",DEFAULT_STRING:"New data!",DEFAULT_NEW_KEY:"key",SHOW_LESS:"(Show less)",EMPTY_STRING:"<empty string>",TOOLTIP_COPY:"Copy to clipboard",TOOLTIP_EDIT:"Edit",TOOLTIP_DELETE:"Delete",TOOLTIP_ADD:"Add"},pr=(t,e)=>(n,r,a)=>((i,s,p,d,l)=>{if(s[d]){const u=s[d](p);if(u!==null)return u}const c=d in i?i[d]:dr[d];return l===void 0?c:c?.replace("{{count}}",String(l))})(t,e,r,n,a);var Ht=[],tt=[];(function(t,e){if(t&&typeof document<"u"){var n,r=e.prepend===!0?"prepend":"append",a=e.singleTag===!0,i=typeof e.container=="string"?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(a){var s=Ht.indexOf(i);s===-1&&(s=Ht.push(i)-1,tt[s]={}),n=tt[s]&&tt[s][r]?tt[s][r]:tt[s][r]=p()}else n=p();t.charCodeAt(0)===65279&&(t=t.substring(1)),n.styleSheet?n.styleSheet.cssText+=t:n.appendChild(document.createTextNode(t))}function p(){var d=document.createElement("style");if(d.setAttribute("type","text/css"),e.attributes)for(var l=Object.keys(e.attributes),c=0;c<l.length;c++)d.setAttribute(l[c],e.attributes[l[c]]);var u=r==="prepend"?"afterbegin":"beforeend";return i.insertAdjacentElement(u,d),d}})(':root{--jer-select-border:#b6b6b6;--jer-select-focus:#777;--jer-select-arrow:#777;--jer-form-border:1px solid #ededf0;--jer-form-border-focus:1px solid #e2e2e2;--jer-highlight-color:#b3d8ff}.jer-visible{opacity:1}.jer-hidden{opacity:0}.jer-select select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#000;cursor:inherit;font-family:inherit;font-size:.8em;line-height:inherit;margin:0;outline:none;padding:0 1em 0 0;z-index:1}select::-ms-expand{display:none}.jer-select{align-items:center;background-color:#fff;background-image:linear-gradient(0deg,#f9f9f9,#fff 33%);border:1px solid var(--jer-select-border);border-radius:.25em;cursor:pointer;display:grid;grid-template-areas:"select";line-height:1.1;max-width:15ch;min-width:12ch;padding:.25em .5em;position:relative}.jer-select select,.jer-select:after{grid-area:select}.jer-select:not(.jer-select--multiple):after{background-color:var(--jer-select-arrow);clip-path:polygon(100% 0,0 0,50% 100%);content:"";height:.5em;justify-self:end;width:.8em}select:focus+.focus{border:1px solid var(--jer-select-focus);border-radius:inherit;bottom:-1px;left:-1px;position:absolute;right:-1px;top:-1px}.jer-select-inner{text-overflow:ellipsis;width:100%}.jer-editor-container{border-radius:.5em;font-size:16px;line-height:1;padding:1em 1em 1em 2em;position:relative;text-align:left}.jer-editor-container textarea{border:var(--jer-form-border);border-radius:.3em;color:var(--jer-input-color);outline:none}.jer-editor-container textarea:focus{border:var(--jer-form-border-focus)}.jer-editor-container input{border:var(--jer-form-border);border-radius:.3em;font-family:inherit;outline:none}.jer-editor-container input:focus{border:var(--jer-form-border-focus)}.jer-editor-container ::selection{background-color:var(--jer-highlight-color)}.jer-collection-header-row,.jer-value-main-row{align-items:center;display:flex;gap:.3em;min-height:1.7em}.jer-collection-header-row{display:flex;flex-wrap:wrap}.jer-collapse-icon{left:-1.2em;position:absolute;top:.35em}.jer-collection-inner{position:relative}.jer-collection-text-edit{align-items:flex-start;display:flex;flex-direction:column;gap:.3em;line-height:1.1em}.jer-collection-text-area{font-family:inherit;font-size:.85em;max-height:40em;overflow:hidden;padding:.2em .5em 0;resize:both}.jer-collection-input-button-row{display:flex;font-size:150%;justify-content:flex-end;margin-top:.4em;width:100%}.jer-collection-error-row{bottom:.5em;position:absolute}.jer-error-slug{margin-left:1em}.jer-value-component{position:relative}.jer-value-main-row{display:flex;gap:0}.jer-value-and-buttons{align-items:center;display:flex;justify-content:flex-start;padding-left:.5em}.jer-value-error-row{position:absolute}.jer-value-string{line-height:1.3em;overflow-wrap:anywhere;white-space:pre-wrap;word-break:break-word}.jer-string-expansion{cursor:pointer;filter:saturate(50%);opacity:.6}.jer-show-less{font-size:80%}.jer-hyperlink{text-decoration:underline}.jer-input-text{font-family:inherit;font-size:.9em;height:1.4em;line-height:1.2em;margin:0;min-width:6em;overflow:hidden;padding:.25em .5em .2em;resize:none}.jer-input-boolean{margin-left:.3em;margin-right:.3em;transform:scale(1.5)}.jer-key-text{line-height:1.1em;white-space:pre-wrap;word-break:break-word}.jer-key-edit{font-size:inherit;font-size:.9em;padding:0 .3em}.jer-value-invalid{font-style:italic;opacity:.5}.jer-input-number{font-size:90%;min-width:3em}.jer-confirm-buttons,.jer-edit-buttons{align-items:center;cursor:pointer;display:flex;height:1em}.jer-input-buttons{gap:.4em}.jer-edit-buttons{gap:.4em;margin-left:.5em;opacity:0}.jer-confirm-buttons{gap:.2em;margin-left:.4em}.jer-edit-buttons:hover{opacity:1;position:relative}.jer-collection-header-row:hover>.jer-edit-buttons,.jer-value-and-buttons:hover>.jer-edit-buttons,.jer-value-main-row:hover>.jer-edit-buttons{opacity:1}.jer-copy-pulse{position:relative;transition:.3s}.jer-copy-pulse:hover{opacity:.85;transform:scale(1.2);transition:.3s}.jer-copy-pulse:after{border-radius:50%;box-shadow:0 0 15px 5px var(--jer-icon-copy-color);content:"";display:block;height:100%;left:0;opacity:0;position:absolute;top:0;transition:all .5s;width:100%}.jer-copy-pulse:active:after{border-radius:4em;box-shadow:0 0 0 0 var(--jer-icon-copy-color);left:0;opacity:1;position:absolute;top:0;transition:0s}.jer-copy-pulse:active{top:.07em}.jer-rotate-90{transform:rotate(-90deg)}.jer-icon:hover{opacity:.85;transform:scale(1.2);transition:.3s}.jer-empty-string{font-size:90%;font-style:italic}.jer-drag-n-drop-padding{border:1px dashed #e0e0e0;border-radius:.3em;height:.5em}.jer-clickzone{height:calc(100% - .8em);left:-1em;position:absolute;top:1.2em}',{});const mr=({data:t,setData:e,rootName:n="root",onUpdate:r=()=>{},onEdit:a=r,onDelete:i=r,onAdd:s=r,onChange:p,onError:d,onEditEvent:l,showErrorMessages:c=!0,enableClipboard:u=!0,indent:m=2,collapse:y=!1,collapseAnimationTime:g=300,showCollectionCount:b=!0,restrictEdit:T=!1,restrictDelete:k=!1,restrictAdd:C=!1,restrictTypeSelection:D=!1,restrictDrag:U=!0,viewOnly:$,searchFilter:x,searchText:M,searchDebounceTime:J=350,keySort:G=!1,showArrayIndices:O=!0,arrayIndexFromOne:N=!1,showStringQuotes:I=!0,showIconTooltips:Z=!1,defaultValue:se=null,newKeyOptions:Q,minWidth:ne=250,maxWidth:X="min(600px, 90vw)",rootFontSize:z,stringTruncate:B=250,translations:ue={},className:W,id:R,customText:P={},customNodeDefinitions:Y=[],customButtons:te=[],jsonParse:me=JSON.parse,jsonStringify:de=(H,ae)=>JSON.stringify(H,ae,2),TextEditor:fe,errorMessageTimeout:re=2500,keyboardControls:oe={},externalTriggers:Ce,insertAtTop:ie=!1,onCollapse:ye,collapseClickZones:De=["header","left"]})=>{const{getStyles:H}=Ne(),{setCurrentlyEditingElement:ae}=Ue(),be=h.useMemo((()=>rt(y)),[y]),je=h.useMemo((()=>pr(ue,P)),[ue,P]),[A,_]=h.useState(M),[q,Ae]=(({setData:w,data:v})=>{const[S,K]=h.useState(w?void 0:v),V=h.useCallback((f=>{w?w(f):K(f)}),[w]);return h.useEffect((()=>{w||K(v)}),[v]),[w?v:S,V]})({setData:e,data:t}),Oe=h.useRef(null);h.useEffect((()=>{ae(null);const w=setTimeout((()=>_(M)),J);return()=>clearTimeout(w)}),[M,J]);const Re={key:n,path:[],level:0,index:0,value:q,size:typeof q=="object"&&q!==null?Object.keys(q).length:1,parentData:null,fullData:q},Pe=(w,v)=>Ze(void 0,void 0,void 0,(function*(){const S=yield w(v);if(S===!0||S===void 0)return void Ae(v.newData);const K=gr(S)?S:["error",S],[V,f]=K;if(V==="error")return Ae(v.currentData),f===!1?je("ERROR_UPDATE",Re):String(f);Ae(f)})),Ve=h.useMemo((()=>rt(T,$)),[T,$]),Ie=h.useMemo((()=>rt(k,$)),[k,$]),Te=h.useMemo((()=>rt(C,$)),[C,$]),he=h.useMemo((()=>rt(U,$)),[U,$]),Ke=h.useMemo((()=>hr(x)),[x]),ge=h.useMemo((()=>(w=>{const v=Object.assign({},Ut);for(const S of Object.keys(Ut)){const K=S;if(w[K]){const V=w[K],f=["clipboardModifier","collapseModifier"].includes(S)?Array.isArray(V)?V:[V]:typeof V=="string"?{key:V}:V;v[K]=f,["stringConfirm","numberConfirm","booleanConfirm"].forEach((E=>{!w[E]&&w.confirm&&(v[E]=v.confirm)}))}}return v})(oe)),[oe]),Ye=h.useCallback(((w,v)=>((S,K,V)=>{const f=Object.entries(K);for(const[E,L]of f)if(Mn(V,S[E],E)){V.preventDefault(),L();break}})(ge,v,w)),[ge]),ke=h.useMemo((()=>{const w=Jt(Y,"stringifyReplacer");return v=>de(v,w)}),[Y,de]),xe=h.useMemo((()=>{const w=Jt(Y,"parseReviver");return v=>{const S=me(v,w);return Ot(S)}}),[Y,me]),He=h.useRef(null);((w,v)=>{const{setCurrentlyEditingElement:S,currentlyEditingElement:K,setCollapseState:V}=Ue();h.useEffect((()=>{if(!w)return;const{collapse:f,edit:E}=w;f&&V(f);const L=!E?.path||$e(E.path)===K;switch(E?.action){case"accept":L&&(v.current&&v.current.click(),S(null));break;case"cancel":L&&S(null);break;default:E?.path&&S(E.path)}}),[w])})(Ce,He);const Je=h.useCallback(((w,v)=>{G!==!1&&(typeof G!="function"?w.sort(((S,K)=>{const V=v(S)[0],f=v(K)[0];return V<f?-1:V>f?1:0})):w.sort(((S,K)=>G(v(S),v(K)))))}),[G]),ve=cn(Y,Re),le={mainContainerRef:Oe,name:n,nodeData:Re,onEdit:(w,v)=>Ze(void 0,void 0,void 0,(function*(){const{currentData:S,newData:K,currentValue:V,newValue:f}=nt(q,v,w,"update");if(V!==f)return yield Pe(a,{currentData:S,newData:K,currentValue:V,newValue:f,name:v.slice(-1)[0],path:v})})),onDelete:(w,v)=>Ze(void 0,void 0,void 0,(function*(){const{currentData:S,newData:K,currentValue:V,newValue:f}=nt(q,v,w,"delete");return yield Pe(i,{currentData:S,newData:K,currentValue:V,newValue:f,name:v.slice(-1)[0],path:v})})),onAdd:(w,v,S)=>Ze(void 0,void 0,void 0,(function*(){const{currentData:K,newData:V,currentValue:f,newValue:E}=nt(q,v,w,"add",S);return yield Pe(s,{currentData:K,newData:V,currentValue:f,newValue:E,name:v.slice(-1)[0],path:v})})),onChange:p,onError:d,onEditEvent:l,showErrorMessages:c,onMove:(w,v,S)=>Ze(void 0,void 0,void 0,(function*(){if(w===null)return;const{currentData:K,newData:V,currentValue:f}=nt(q,w,"","delete"),E=w.slice(-1)[0],L=v.slice(0,-1),pe=v.slice(-1)[0];let ee=typeof pe=="number"?S==="above"?pe:pe+1:typeof E=="number"?`arr_${E}`:E;w.slice(0,-1).join(".")===v.slice(0,-1).join(".")&&typeof E=="number"&&typeof ee=="number"&&E<ee&&(ee-=1);const ce=typeof ee=="number"?{insert:!0}:S==="above"?{insertBefore:pe}:{insertAfter:pe},{newData:_e,newValue:Me}=nt(V,[...L,ee],f,"add",ce);return yield Pe(a,{currentData:K,newData:_e,currentValue:f,newValue:Me,name:v.slice(-1)[0],path:v})})),showCollectionCount:b,collapseFilter:be,collapseAnimationTime:g,restrictEditFilter:Ve,restrictDeleteFilter:Ie,restrictAddFilter:Te,restrictTypeSelection:D,restrictDragFilter:he,canDragOnto:!1,searchFilter:Ke,searchText:A,enableClipboard:u,keySort:G,sort:Je,showArrayIndices:O,arrayIndexFromOne:N,showStringQuotes:I,showIconTooltips:Z,indent:m,defaultValue:se,newKeyOptions:Q,stringTruncate:B,translate:je,customNodeDefinitions:Y,customNodeData:ve,customButtons:te,parentData:null,jsonParse:xe,jsonStringify:ke,TextEditor:fe,errorMessageTimeout:re,handleKeyboard:Ye,keyboardControls:ge,insertAtTop:{object:ie===!0||ie==="object",array:ie===!0||ie==="array"},onCollapse:ye,editConfirmRef:He,collapseClickZones:De},Le=Object.assign(Object.assign({},H("container",Re)),{minWidth:ne,maxWidth:X});return Le.fontSize=z??Le.fontSize,o.jsx("div",{id:R,ref:Oe,className:`jer-editor-container ${W??""}`,style:Le,children:Xe(q)&&!ve.renderCollectionAsValue?o.jsx(un,Object.assign({data:q},le)):o.jsx(ln,Object.assign({data:q,showLabel:!0},le))})},fr=t=>{var e;const[n,r]=h.useState();return h.useEffect((()=>{const a=document.documentElement;r(a)}),[]),n?o.jsx(zn,{theme:(e=t.theme)!==null&&e!==void 0?e:Tt,icons:t.icons,docRoot:n,children:o.jsx($n,{onEditEvent:t.onEditEvent,onCollapse:t.onCollapse,children:o.jsx(mr,Object.assign({},t))})}):null},nt=(t,e,n,r,a={})=>{if(e.length===0)return{currentData:t,newData:n,currentValue:t,newValue:n};const i=Object.assign({remove:r==="delete"},a),s=r!=="add"?Qe(t,e):void 0;return{currentData:t,newData:Vn(t,e,n,i),currentValue:s,newValue:r!=="delete"?n:void 0}},rt=(t,e)=>e?()=>!0:typeof t=="boolean"?()=>t:typeof t=="number"?({level:n})=>n>=t:t,hr=t=>{if(t!==void 0)return t==="value"?qe:t==="key"?Wt:t==="all"?(e,n)=>qe(e,n)||Wt(e,n):t},gr=t=>Array.isArray(t)&&t.length===2&&["error","value"].includes(t[0]),Jt=(t,e)=>{const n=e==="stringifyReplacer"?[r=>r===void 0?tn:r]:[];if(n.push(...t.map((r=>r[e])).filter((r=>!!r))),n.length!==0)return(r,a)=>{let i=a;for(const s of n)i=s(i);return i}},yr={displayName:"Github Dark",styles:{container:{backgroundColor:"#0d1117",color:"white"},dropZone:"rgba(165, 214, 255, 0.17)",property:"#E6EDF3",bracket:"#56d364",itemCount:"#8B949E",string:"#A5D6FF",number:"#D2A8FF",boolean:{color:"#FF7B72",fontSize:"90%",fontWeight:"bold"},null:"green",iconCollection:"#D2A8FF",iconEdit:"#D2A8FF",iconDelete:"rgb(203, 75, 22)",iconAdd:"rgb(203, 75, 22)",iconCopy:"#A5D6FF",iconOk:"#56d364",iconCancel:"rgb(203, 75, 22)"}},br={displayName:"Github Light",styles:{container:"white",property:"#1F2328",bracket:"#00802e",itemCount:"#8B949E",string:"#0A3069",number:"#953800",boolean:{color:"#CF222E",fontSize:"90%",fontWeight:"bold"},null:"#FF7B72",iconCollection:"#8250DF",iconEdit:"#8250DF",iconDelete:"rgb(203, 75, 22)",iconAdd:"#8250DF",iconCopy:"#57606A"}};function Dr(t){const e=vn.c(53),{children:n,viewOnly:r,enableCopy:a,enableSearch:i,className:s,searchClassName:p,jsonClassName:d,isCodeEditor:l,onUpdate:c,onEdit:u,onDelete:m,onAdd:y,onChange:g}=t,b=r===void 0?!1:r,T=a===void 0?!0:a,k=i===void 0?!0:i,C=l===void 0?!1:l,{styles:D}=En(),{theme:U}=xn(),$=U==="dark"?yr:br,{t:x}=wn(),{notification:M}=Cn.useApp();let J;e[0]!==M||e[1]!==x?(J=H=>{const{stringValue:ae,type:be,success:je,errorMessage:A}=H;if(je){const _=x("components.JsonEditor.copied to clipboard",{defaultValue:"å¤åˆ¶æˆåŠŸ"}),q=be==="value"?x("components.JsonEditor.Value",{defaultValue:"å€¼"}):x("components.JsonEditor.Path",{defaultValue:"è·¯å¾„"});M.success({message:`${q} ${_}`,description:o.jsx(Sn,{enableCopy:!1,codeClassName:"max-h-[68vh] overflow-auto",children:ae}),duration:3})}else{const _=x("components.JsonEditor.Problem copying to clipboard",{defaultValue:"å¤åˆ¶å¤±è´¥"});M.error({message:_,description:A||x("components.JsonEditor.Unknown error",{defaultValue:"æœªçŸ¥é”™è¯¯"}),duration:3})}},e[0]=M,e[1]=x,e[2]=J):J=e[2];const G=J;let O;e[3]!==M||e[4]!==x?(O=H=>{const{error:ae}=H;M.error({message:ae.code,description:ae.message||x("components.JsonEditor.Unknown error",{defaultValue:"æœªçŸ¥é”™è¯¯"}),duration:3})},e[3]=M,e[4]=x,e[5]=O):O=e[5];const N=O,[I,Z]=h.useState(""),[se,Q]=Nn(n),{present:ne}=se,{set:X,reset:z,undo:B,redo:ue,canUndo:W,canRedo:R}=Q;let P;e[6]!==s?(P=ut(s),e[6]=s,e[7]=P):P=e[7];let Y;e[8]!==D.bgLayout?(Y=ut("p-[14px] flex items-center flex-wrap rounded-t-md",D.bgLayout),e[8]=D.bgLayout,e[9]=Y):Y=e[9];let te;e[10]!==k||e[11]!==p||e[12]!==I||e[13]!==x?(te=k&&o.jsx(Dn,{value:I,onChange:H=>Z(H.target.value),placeholder:x("components.JsonEditor.Search",{defaultValue:"æœç´¢"}),prefix:o.jsx(On,{}),className:ut("w-50",p)}),e[10]=k,e[11]=p,e[12]=I,e[13]=x,e[14]=te):te=e[14];let me;e[15]!==R||e[16]!==W||e[17]!==n||e[18]!==ue||e[19]!==z||e[20]!==x||e[21]!==B||e[22]!==b?(me=!b&&o.jsxs(o.Fragment,{children:[o.jsx(xt,{placement:"bottom",title:x("components.JsonEditor.Undo",{defaultValue:"æ’¤é”€"}),children:o.jsx(wt,{type:"text",onClick:B,disabled:!W,children:o.jsx(Tn,{})})}),o.jsx(xt,{placement:"bottom",title:x("components.JsonEditor.Redo",{defaultValue:"é‡åš"}),children:o.jsx(wt,{type:"text",onClick:ue,disabled:!R,children:o.jsx(An,{})})}),o.jsx(xt,{placement:"bottom",title:x("components.JsonEditor.Reset",{defaultValue:"é‡ç½®"}),children:o.jsx(wt,{type:"text",onClick:()=>z(n),disabled:!W,children:o.jsx(Rn,{})})})]}),e[15]=R,e[16]=W,e[17]=n,e[18]=ue,e[19]=z,e[20]=x,e[21]=B,e[22]=b,e[23]=me):me=e[23];let de;e[24]!==Y||e[25]!==te||e[26]!==me?(de=o.jsxs("div",{className:Y,children:[te,me]}),e[24]=Y,e[25]=te,e[26]=me,e[27]=de):de=e[27];const fe=b?n:ne,re=X;let oe;e[28]!==D.bgLayout||e[29]!==d?(oe=ut("w-full pt-0! rounded-t-none! rounded-b-md!",D.bgLayout,d),e[28]=D.bgLayout,e[29]=d,e[30]=oe):oe=e[30];const Ce=T?G:void 0;let ie;e[31]!==C||e[32]!==x?(ie=C?H=>o.jsx(h.Suspense,{fallback:o.jsx(Pn,{tip:x("components.JsonEditor.Loading code editor",{defaultValue:"åŠ è½½ä»£ç ç¼–è¾‘å™¨ä¸­"}),size:"large"}),children:o.jsx(kn,{...H})}):void 0,e[31]=C,e[32]=x,e[33]=ie):ie=e[33];let ye;e[34]!==$||e[35]!==y||e[36]!==g||e[37]!==m||e[38]!==u||e[39]!==N||e[40]!==c||e[41]!==I||e[42]!==fe||e[43]!==re||e[44]!==oe||e[45]!==Ce||e[46]!==ie||e[47]!==b?(ye=o.jsx(fr,{data:fe,setData:re,theme:$,className:oe,maxWidth:"100%",viewOnly:b,searchText:I,rootFontSize:14,showCollectionCount:"when-closed",enableClipboard:Ce,showIconTooltips:!0,onUpdate:c,onEdit:u,onDelete:m,onAdd:y,onChange:g,onError:N,TextEditor:ie}),e[34]=$,e[35]=y,e[36]=g,e[37]=m,e[38]=u,e[39]=N,e[40]=c,e[41]=I,e[42]=fe,e[43]=re,e[44]=oe,e[45]=Ce,e[46]=ie,e[47]=b,e[48]=ye):ye=e[48];let De;return e[49]!==de||e[50]!==ye||e[51]!==P?(De=o.jsxs("div",{className:P,children:[de,ye]}),e[49]=de,e[50]=ye,e[51]=P,e[52]=De):De=e[52],De}export{Dr as J};
