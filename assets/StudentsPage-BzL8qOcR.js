import{b as d,j as o}from"./@uiw/react-codemirror-dimZJgSu.js";import{c as be,b as xe,Q as _e,F as me,B as U,ad as Pe,ae as Re}from"./index-CwDalt6B.js";import{u as W,s as Fe,d as Ie,a as je,p as ke,T as Ce}from"./TablePage-CQ77qt_-.js";import"./react-syntax-highlighter-DW6ulm9l.js";import"./markdown-plugins-CqPL4kxN.js";import"./react-markdown-U0gPFawi.js";import"./index-D6hL_xQQ.js";import"./isBrowser-BdZk1G-M.js";import"./isObjectLike-Dgt2gYKP.js";import"./use-immer.module-BUjbJLOH.js";import"./FormBlock-DxTtaAkV.js";import"./Pagination-tZ5961FD.js";import"./progress-B267_-79.js";import"./iconUtil-nk-7A3wh.js";import"./index-C1Uc0xMy.js";import"./index-abs6yZev.js";import"./index-C7j3i05K.js";import"./Table-NZRh8s1K.js";import"./index-D7f8rzsr.js";function Ue(){const e=be.c(76),{t:X}=xe(),{modal:Y}=_e.useApp(),[i,_]=d.useState(!1),[P,ue]=d.useState(!1),[r]=me.useForm(),[R]=me.useForm(),[c,de]=d.useState(),[m,Z]=d.useState(1),[s,fe]=d.useState(10),[ee,pe]=d.useState(0);let F,I;e[0]!==c||e[1]!==r||e[2]!==i?(F=()=>{i?r.setFieldsValue(c):r.resetFields()},I=[i,c,r],e[0]=c,e[1]=r,e[2]=i,e[3]=F,e[4]=I):(F=e[3],I=e[4]),d.useEffect(F,I);let j;e[5]!==m||e[6]!==s?(j=[{page:m,pageSize:s}],e[5]=m,e[6]=s,e[7]=j):j=e[7];const{data:te,error:k,loading:f,refresh:l,run:he}=W(Fe,{defaultParams:j,onSuccess:t=>{const a=t?.data?.data;if(pe(a.total),a.total>0&&m>1&&a.data.length===0){const n=Math.ceil(a.total/s);Z(n),u({page:n,pageSize:s,...R.getFieldsValue()})}}}),u=he;let C;e[8]!==l?(C={manual:!0,onSuccess:()=>{l(),_(!1)}},e[8]=l,e[9]=C):C=e[9];const{run:ae,loading:ge}=W(je,C);let w;e[10]!==l?(w={manual:!0,onSuccess:()=>{l(),_(!1)}},e[10]=l,e[11]=w):w=e[11];const{run:le,loading:Se}=W(ke,w);let T;e[12]===Symbol.for("react.memo_cache_sentinel")?(T={manual:!0},e[12]=T):T=e[12];const{runAsync:se}=W(Ie,T);let z;e[13]!==se||e[14]!==l?(z=async t=>{await se(t),l()},e[13]=se,e[14]=l,e[15]=z):z=e[15];const oe=z;let M,B,E;e[16]===Symbol.for("react.memo_cache_sentinel")?(B={title:"ID",dataIndex:"id"},E={title:"姓名",dataIndex:"name"},M={title:"年龄",dataIndex:"age"},e[16]=M,e[17]=B,e[18]=E):(M=e[16],B=e[17],E=e[18]);let O;e[19]!==oe||e[20]!==Y?(O=[B,E,M,{title:"操作",dataIndex:"action",render:(t,a)=>o.jsxs(o.Fragment,{children:[o.jsx(U,{color:"primary",variant:"text",size:"small",onClick:()=>{ue(!0),de({...a}),_(!0)},children:"编辑"}),o.jsx(U,{color:"danger",variant:"text",size:"small",onClick:()=>{Y.confirm({title:"删除提示",content:`确认删除学生 ${a.name} 吗？`,closable:!0,onOk(){return oe(a.id)}})},children:"删除"})]})}],e[19]=oe,e[20]=Y,e[21]=O):O=e[21];const ne=O;if(k){const t=k.message;let a;e[22]!==X?(a=X("components.TablePage.Request Again",{defaultValue:"重新请求"}),e[22]=X,e[23]=a):a=e[23];let n;e[24]!==f||e[25]!==l||e[26]!==a?(n=[o.jsx(U,{onClick:l,loading:f,children:a},"Request Again")],e[24]=f,e[25]=l,e[26]=a,e[27]=n):n=e[27];let G;return e[28]!==k.message||e[29]!==n?(G=o.jsx(Pe,{status:"error",title:t,extra:n}),e[28]=k.message,e[29]=n,e[30]=G):G=e[30],G}let q;e[31]!==ae||e[32]!==c||e[33]!==P||e[34]!==le?(q=t=>{P?le({...c,...t}):ae(t)},e[31]=ae,e[32]=c,e[33]=P,e[34]=le,e[35]=q):q=e[35];const re=q;let A;e[36]===Symbol.for("react.memo_cache_sentinel")?(A=()=>{_(!1)},e[36]=A):A=e[36];const ye=A;let p;e[37]!==te?.data?.data?.data?(p=te?.data?.data?.data||[],e[37]=te?.data?.data?.data,e[38]=p):p=e[38];let D,H;e[39]===Symbol.for("react.memo_cache_sentinel")?(D={offsetHeader:158},H={scrollToFirstRowOnChange:!0},e[39]=D,e[40]=H):(D=e[39],H=e[40]);let h;e[41]!==m||e[42]!==s||e[43]!==ee?(h={current:m,pageSize:s,total:ee,showSizeChanger:!0,showQuickJumper:!0,showTotal:we},e[41]=m,e[42]=s,e[43]=ee,e[44]=h):h=e[44];let g;e[45]!==u?(g=t=>{Z(t.current),fe(t.pageSize),u({page:t.current,pageSize:t.pageSize})},e[45]=u,e[46]=g):g=e[46];let S;e[47]!==u||e[48]!==s?(S=t=>{Z(1),u({page:1,pageSize:s,...t})},e[47]=u,e[48]=s,e[49]=S):S=e[49];let L;e[50]===Symbol.for("react.memo_cache_sentinel")?(L={type:"Input",name:"name",label:null,fieldProps:{prefix:o.jsx(Re,{}),allowClear:!0,placeholder:"请输入姓名"}},e[50]=L):L=e[50];let N;e[51]===Symbol.for("react.memo_cache_sentinel")?(N=[L,{type:"Button",fieldProps:{type:"primary",htmlType:"submit",children:"搜索"},label:null}],e[51]=N):N=e[51];let y;e[52]!==R||e[53]!==S?(y={form:R,layout:"inline",onFinish:S,items:N},e[52]=R,e[53]=S,e[54]=y):y=e[54];let v;e[55]===Symbol.for("react.memo_cache_sentinel")?(v=o.jsx(U,{color:"primary",onClick:()=>{ue(!1),de({name:"",age:0,groupId:void 0}),_(!0)},children:"添加学生"}),e[55]=v):v=e[55];const ie=P?"编辑学生":"添加学生";let Q;e[56]===Symbol.for("react.memo_cache_sentinel")?(Q={autoFocus:!0,htmlType:"submit"},e[56]=Q):Q=e[56];const ce=P?Se:ge;let b;e[57]!==r||e[58]!==re?(b=t=>o.jsx(me,{form:r,onFinish:a=>re(a),children:t}),e[57]=r,e[58]=re,e[59]=b):b=e[59];let V;e[60]===Symbol.for("react.memo_cache_sentinel")?(V=[{required:!0}],e[60]=V):V=e[60];let $;e[61]===Symbol.for("react.memo_cache_sentinel")?($={type:"Input",name:"name",label:"姓名",rules:V,className:"pt-4",fieldProps:{allowClear:!0,placeholder:"请输入姓名"}},e[61]=$):$=e[61];let K;e[62]===Symbol.for("react.memo_cache_sentinel")?(K=[$,{type:"InputNumber",name:"age",label:"年龄",rules:[{required:!0}],fieldProps:{min:1,placeholder:"请输入年龄",className:"w-full"}}],e[62]=K):K=e[62];let x;e[63]!==i||e[64]!==ie||e[65]!==ce||e[66]!==b?(x={title:ie,open:i,onCancel:ye,okButtonProps:Q,confirmLoading:ce,modalRender:b,forceRender:!0,formBlockItems:K},e[63]=i,e[64]=ie,e[65]=ce,e[66]=b,e[67]=x):x=e[67];let J;return e[68]!==ne||e[69]!==f||e[70]!==p||e[71]!==h||e[72]!==g||e[73]!==y||e[74]!==x?(J=o.jsx("div",{className:"px-4",children:o.jsx(Ce,{rowKey:"id",loading:f,columns:ne,dataSource:p,bordered:!0,sticky:D,scroll:H,pagination:h,onChange:g,localKey:"StudentsPage",formBlockProps:y,actions:v,formModalProps:x})}),e[68]=ne,e[69]=f,e[70]=p,e[71]=h,e[72]=g,e[73]=y,e[74]=x,e[75]=J):J=e[75],J}function we(e){return`共 ${e} 条记录`}export{Ue as default};
