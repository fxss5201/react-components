import React from 'react'
import Playground from '../../components/Playground'
import FilesListUpload from './FilesListUpload'
import FilesListUploadRaw from './FilesListUpload.tsx?raw'
import FileSelectList from './FileSelectList'
import FileSelectListRaw from './FileSelectList.tsx?raw'
import FileSelectTree from './FileSelectTree'
import FileSelectTreeRaw from './FileSelectTree.tsx?raw'
import FileSelectListIgnoreFolder from './FileSelectListIgnoreFolder'
import FileSelectListIgnoreFolderRaw from './FileSelectListIgnoreFolder.tsx?raw'

# FilesSelect

FilesSelect 组件用于选择文件列表，支持选择文件、选择文件夹（含根目录）、选择文件夹（不含根目录）。

## 目录

## API

### 参数 Props

``` ts
export type FileType = 'file' | 'folder'
export type FileItemType = {
  type: FileType
  file?: File
  name: string
  size?: number
  filePath: string
  folderPath: string
}

export type FileTreeFileItem = Omit<FileItemType, 'type'> & {
  type: 'file'
}

export type FolderItemType = {
  type: 'folder'
  name: string
  filePath: string
  folderPath: string
  children: FileTreeItem[]
}
export type FileTreeItem = FileTreeFileItem | FolderItemType

export type TargetType = 'tree' | 'list'
```

``` ts
import type { FileType, FileItemType, TargetType, FileTreeFileItem } from '../types/files'

export type FileTreeItem = FileItemType & {
  children?: FileTreeItem[]
}

export type FilesSelectProps<T extends TargetType> = {
  targetType: T,
  onSelect: (fileTrees: T extends 'tree' ? FileTreeItem[] : FileTreeFileItem[]) => void
  isUpload?: boolean
  isIgnoreFolder?: boolean // 当 targetType 为 'list' 时，是否忽略文件夹，比如说上传文件的时候，只需要上传文件，不需要上传文件夹
  locale?: LocaleType
  className?: string
  children?: React.ReactNode
}
```

| 属性 | 说明 | 类型 | 默认值 |
| --- | --- | --- | --- |
| `targetType` | 执行 onSelect 时，参数的类型， tree 时为文件树，list 时为文件列表 | `'tree' \| 'list'` | `'tree'` |
| `onSelect` | 选择文件/文件夹后的回调函数 | `(fileTrees: T extends 'tree' ? FileTreeItem[] : FileTreeFileItem[]) => void` | - |
| `isUpload` | 是否上传文件/文件夹，仅用于更换 选择 或 上传 文件文本 | `boolean` | `false` |
| `isIgnoreFolder` | 当 targetType 为 'list' 时，是否忽略文件夹，比如说上传文件的时候，只需要上传文件，不需要上传文件夹 | `boolean` | `false` |
| `locale` | 语言 | `'zh' \| 'en'` | `'zh'` |
| `className` | 自定义class类名 | `string` | - |
| `children` | 子元素 | `React.ReactNode` | - |

## 演示示例

### 文件列表

<Playground code={FileSelectListRaw} title='文件列表' description='选择文件列表。'>
  <FileSelectList />
</Playground>

### 忽略文件夹的文件列表

<Playground code={FileSelectListIgnoreFolderRaw} title='忽略文件夹的文件列表' description='选择文件列表，忽略文件夹。'>
  <FileSelectListIgnoreFolder />
</Playground>

### 文件树

<Playground code={FileSelectTreeRaw} title='文件树' description='选择文件树。'>
  <FileSelectTree />
</Playground>

### 上传文件/文件夹

<Playground code={FilesListUploadRaw} title='上传文件/文件夹' description='选择之后直接上传文件/文件夹。'>
  <FilesListUpload />
</Playground>
