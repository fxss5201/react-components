import React from 'react'
import Playground from '../../../components/Playground'
import FilesListUpload from './FilesListUpload'
import FilesListUploadRaw from './FilesListUpload.tsx?raw'
import FilesListUploadTree from './FilesListUploadTree'
import FilesListUploadTreeRaw from './FilesListUploadTree.tsx?raw'

# FilesUploadDrawer

The FilesUploadDrawer component is used to display drawers for uploading multiple files/folders. As it involves the operation of uploading files/folders, when using this component, it is necessary to manually handle the function logic of uploading files and folders (if folders are not needed, they need to be manually filtered or set 'isIgnoreFolder' to 'true' using the 'FilesSelect' component).

When the parent folder fails to upload, the internal child files/folders fail to upload directly.

## TOC

## API

### Parameters Props

``` ts
export type FileType = 'file' | 'folder'
export type FileItemType = {
  type: FileType
  file?: File
  name: string
  size?: number
  filePath: string
  folderPath: string
}

export type FileTreeFileItem = Omit<FileItemType, 'type'> & {
  type: 'file'
}

export type FolderItemType = {
  type: 'folder'
  name: string
  filePath: string
  folderPath: string
  children: FileTreeItem[]
}
export type FileTreeItem = FileTreeFileItem | FolderItemType

export type TargetType = 'tree' | 'list'
```

``` ts
export type UploadFileItemType = FileItemType & {
  icon: React.ReactNode,
  percent: number,
  percentStatus: ProgressProps['status'],
}

export type UploadResultFIleItemType = Omit<FileItemType, 'filePath' | 'folderPath'>

export type UploadResultFileTreeItemType = UploadResultFIleItemType & {
  children?: UploadResultFileTreeItemType[]
}

export type FilesUploadDrawerProps<T extends TargetType> = {
  targetType: T,
  title?: string,
  open: boolean,
  setOpen: (open: boolean) => void,
  list?: FileItemType[],
  locale?: LocaleType,
  onSuccess?: (fileTrees: T extends 'list' ? UploadFileItemType[] : UploadResultFileTreeItemType[]) => void,
}
```

| Parameter | Description | Type | Default |
| --- | --- | --- | --- |
| targetType | The parameter type of the callback function for successful upload | `'tree' \| 'list'` | - |
| title | Drawer title | `string` | '上传文件/文件夹' |
| open | Whether the drawer is open | `boolean` | `false` |
| setOpen | Callback function to open/close the drawer | `(open: boolean) => void` | - |
| list | List of files/folders to upload | `FileItemType[]` | [] |
| locale | Language | `'zh' \| 'en'` | `'zh'` |
| onSuccess | Callback function when upload succeeds | `(item: UploadFileItemType[]) => void` | - |

## Demos

### Upload Files/Folders

<Playground code={FilesListUploadRaw} title='Upload Files/Folders' description='After selection, directly upload the file/folder. After successful upload, return the list structure of the file/folder.'>
  <FilesListUpload />
</Playground>

### Upload Files/Folders Tree

<Playground code={FilesListUploadTreeRaw} title='Upload Files/Folders Tree' description='After selection, directly upload the file/folder. After successful upload, return the tree structure of the file/folder.'>
  <FilesListUploadTree />
</Playground>
